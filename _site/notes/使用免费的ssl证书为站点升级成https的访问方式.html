<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>使用免费的ssl证书为站点升级成https的访问方式</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@HeiswayiNrird" /><meta name="twitter:title" content="使用免费的ssl证书为站点升级成https的访问方式" /><meta name="twitter:description" content="传统的http请求方式发送的大多是明文数据，使用简单的抓包工具就能嗅探出数据包中的授权信息。而使用https的方式可以有效的杜绝大部分抓包工具（非绝对，如sslstrip）。目前主流搜索引擎在爬取站点信息时，优先考虑https的网站，所以升级势在必行。"><meta name="description" content="传统的http请求方式发送的大多是明文数据，使用简单的抓包工具就能嗅探出数据包中的授权信息。而使用https的方式可以有效的杜绝大部分抓包工具（非绝对，如sslstrip）。目前主流搜索引擎在爬取站点信息时，优先考虑https的网站，所以升级势在必行。"><meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o"><link rel="icon" href="/assets/favicon.ico"><link rel="apple-touch-icon" href="/assets/touch-icon.png"><link href="https://fonts.googleapis.com/css?family=Karla" rel="stylesheet"><link rel="stylesheet" href="/assets/core.css"><link rel="canonical" href="/notes/%E4%BD%BF%E7%94%A8%E5%85%8D%E8%B4%B9%E7%9A%84ssl%E8%AF%81%E4%B9%A6%E4%B8%BA%E7%AB%99%E7%82%B9%E5%8D%87%E7%BA%A7%E6%88%90https%E7%9A%84%E8%AE%BF%E9%97%AE%E6%96%B9%E5%BC%8F"><link rel="alternate" type="application/atom+xml" title="A Coder, a Programmer, a Hacker walk into Evan's Blog" href="/feed.xml" /></head><body><aside class="logo"> <a href="/"> <img src="/assets/evan.jpeg" class="gravatar"> </a> <span class="logo-prompt">Back to Home</span></aside><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1>使用免费的ssl证书为站点升级成https的访问方式</h1><time>September 20, 2016</time></div><div class="divider"></div><p>传统的<strong>http</strong>请求方式发送的大多是明文数据，使用简单的抓包工具就能嗅探出数据包中的授权信息。而使用<strong>https</strong>的方式可以有效的杜绝大部分抓包工具（非绝对，如<code class="highlighter-rouge">sslstrip</code>）。目前主流搜索引擎在爬取站点信息时，优先考虑<strong>https</strong>的网站，所以升级势在必行。</p><h1 id="1-证书申请">1. 证书申请</h1><p>申请ssl证书的提供商有很多，这里以 <a href="https://buy.wosign.com/">沃通</a> 为例，免费的3年使用权。当然免费的证书在安全性方面还是有待欠缺的。</p><p><strong>备注</strong>：若不需要认证的媒介颁发证书，也可以在<strong>Linux</strong>环境中使用 <code class="highlighter-rouge">openssl</code> 自己生成证书。使用自定义的证书时，由于属于非官方机构颁发，浏览器会提示警告信息，只有用户授权后才能正常浏览站点。</p><p>在沃通官网 <a href="https://buy.wosign.com/">https://buy.wosign.com/</a> 上注册用户、添加域名、审核域名归属权、提交域名请求文件、等待签发等一系列操作后，最后下载签发的证书，解压密码就是域名证书的密码。压缩包中含有各种平台所需的证书文件，根据自己的站点决定使用哪个。</p><p><img src="../images/ssl_sert.png" /></p><h1 id="2-在web服务上安装证书">2. 在Web服务上安装证书</h1><p>这里使用 <strong>apache</strong> 服务器为例子，编辑 <code class="highlighter-rouge">httpd-ssl.conf</code> 文件，内容如下：</p><div class="highlighter-rouge"><pre class="highlight"><code>Listen 443
 
&lt;VirtualHost _default_:443&gt;
ServerAdmin wangjunneil@gmail.com
DocumentRoot "/var/www/www.wangjunneil.com"
ServerName www.wangjunneil.com
ServerAlias wangjunneil.com
&lt;IfModule expires_module&gt;
    ExpiresActive on
    ExpiresByType text/css A864000
    ExpiresByType application/x-javascript A864000
    ExpiresByType application/javascript A864000
    ExpiresByType text/html A864000
    ExpiresByType image/jpeg A864000
    ExpiresByType image/gif A864000
    ExpiresByType image/png A864000
    ExpiresByType image/x-icon A864000
&lt;/IfModule&gt;
ErrorLog "/opt/lampp/logs/error_log"
TransferLog "/opt/lampp/logs/access_log"
 
# ssl证书配置
SSLEngine on
SSLprotocol ALL -sslv2 -sslv3
SSLCertificateFile "/var/www/www.wangjunneil.com/ssl/2_www.wangjunneil.com.crt"
SSLCertificateKeyFile "/var/www/www.wangjunneil.com/ssl/3_www.wangjunneil.com.key"
SSLCertificateChainFile "/var/www/www.wangjunneil.com/ssl/1_root_bundle.crt"
&lt;/VirtualHost&gt;
</code></pre></div><p>另外编辑 <code class="highlighter-rouge">httpd-vhosts.conf</code> 将原有http请求强制转向到https的方式，配置如下：</p><div class="highlighter-rouge"><pre class="highlight"><code>&lt;VirtualHost *:80&gt;
    ServerName www.wangjunneil.com
    ServerAlias wangjunneil.com
    RedirectMatch permanent ^/(.*) https://www.wangjunneil.com
&lt;/VirtualHost&gt;
</code></pre></div><h1 id="3-验证站点的https访问">3. 验证站点的Https访问</h1><p>在浏览器中输入输入https方式的域名，检查域名前是否有绿色的SSL锁标志。有时锁图标上会有警告或者错误，这是因为当前访问的页面内容中仍有http方式的资源访问，可以通过浏览器的<strong>debug</strong>模式找出并统一修改成https方式即可。</p><p>当然也可以使用在线的SSL站点验证，如 <a href="https://www.ssllabs.com/ssltest/">Qualys SSL Labs</a></p></article><div class="page-navigation"> <a class="next" href="/notes/Kali%E7%B3%BB%E7%BB%9F%E4%B8%AD%E4%BD%BF%E7%94%A8smbclient%E8%AE%BF%E9%97%AEwindows%E5%85%B1%E4%BA%AB%E7%9B%AE%E5%BD%95" title="NEXT: Kali系统中使用smbclient访问windows共享目录">&lt;&lt;</a> <span> &middot; </span> <a class="home" href="/" title="Back to Homepage">首页</a> <span> &middot; </span> <a class="prev" href="/notes/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84iptables%E9%98%B2%E7%81%AB%E5%A2%99%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE%E6%89%8D%E8%83%BD%E6%9B%B4%E5%AE%89%E5%85%A8" title="PREV: 服务器上的iptables防火墙应该如何配置才能更安全">&gt;&gt;</a></div></main><div class="footer"> <!-- <span class="block">Made with &hearts; using <a href="http://jekyllrb.com/">Jekyll</a> &amp; <a href="https://github.com/heiswayi/the-plain" title="The Plain theme by Heiswayi Nrird">The Plain</a> &middot; &lt;/&gt; on <a href="https://github.com/wangjunneil" title="Hosted on GitHub">GitHub</a></span> --> <span class="block"><a href="https://wangjunneil.github.io">Evan's Blog</a> © 2016 - All Rights Reserved</span></div></body></html>