<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>没有visualstdio使用命令行编译开发windows应用</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@HeiswayiNrird" /><meta name="twitter:title" content="没有visualstdio使用命令行编译开发windows应用" /><meta name="twitter:description" content="对于.net开发人员来说，工具选择 visual studio 是不二的选择，毕竟 visual studio 是微软官方的IDE，里面的功能也非常全面，但也带来了很多负面的问题，工具庞大、占内存、屏蔽了很多底层实现等等。"><meta name="description" content="对于.net开发人员来说，工具选择 visual studio 是不二的选择，毕竟 visual studio 是微软官方的IDE，里面的功能也非常全面，但也带来了很多负面的问题，工具庞大、占内存、屏蔽了很多底层实现等等。"><meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o"><link rel="icon" href="/assets/favicon.ico"><link rel="apple-touch-icon" href="/assets/touch-icon.png"><link href="https://fonts.googleapis.com/css?family=Karla" rel="stylesheet"><link rel="stylesheet" href="/assets/core.css"><link rel="canonical" href="/notes/%E6%B2%A1%E6%9C%89visualstdio%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%BC%96%E8%AF%91%E5%BC%80%E5%8F%91windows%E5%BA%94%E7%94%A8"><link rel="alternate" type="application/atom+xml" title="A Coder, a Programmer, a Hacker walk into Evan's Blog" href="/feed.xml" /></head><body><aside class="logo"> <a href="/"> <img src="/assets/evan.jpeg" class="gravatar"> </a> <span class="logo-prompt">Back to Home</span></aside><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1>没有visualstdio使用命令行编译开发windows应用</h1><time>August 1, 2016</time></div><div class="divider"></div><p>对于.net开发人员来说，工具选择 visual studio 是不二的选择，毕竟 visual studio 是微软官方的IDE，里面的功能也非常全面，但也带来了很多负面的问题，工具庞大、占内存、屏蔽了很多底层实现等等。</p><h1 id="选择不使用visual-studio的原因可能有">选择不使用visual studio的原因可能有</h1><ul><li>希望深入了解 .net 编译过程，不希望被图像界面蒙蔽双眼的</li><li>开发者或许出于某些原因，例如平台或工作环境的原因而无法安装VS</li><li>开发一个简单的应用，为了5kb大小去下载5G的IDE过于奢侈</li></ul><h1 id="必备条件">必备条件</h1><ul><li>一个简单的编辑工具，如记事板、notepad++或者vim</li><li>.net framework库，winxp版本之后是默认安装到系统中的，一般位置在 C:\Windows\Microsoft.NET\Framework64 中</li></ul><h1 id="net-framework介绍">.net framework介绍</h1><p>在 <strong>.net framework</strong> 的目录中找到自己希望使用的版本，如我使用的是 <strong>C:\Windows\Microsoft.NET\Framework64\v4.0.30319</strong>，并将此路径放到系统的PATH变量中，需要使用此目录下的 <code class="highlighter-rouge">csc.exe</code> 和 <code class="highlighter-rouge">msbuild.exe</code> 两个程序。其中 <code class="highlighter-rouge">csc.exe</code> 就是C#编译器，而 <code class="highlighter-rouge">msbuild.exe</code> 则是负责读取项目文件（例如.csproj文件）并进行编译的工具。也就是说，当你拿到一个 visual studio 的项目源码，不需要安装 visual studio 也可以使用 <code class="highlighter-rouge">msbuild.exe</code> 对源代码进行编译处理。</p><h1 id="net项目结构">.net项目结构</h1><p>通常来说，在新建Windows项目时，vs会自动创建一个 <strong>Program.cs</strong> 文件作为入口、一个包含了代码所依赖资源信息的 <strong>.csproj</strong> 文件、包含二进制名称、版本号等信息的 <strong>AssemblyInfo.cs</strong> 文件，以及包含了自定义配置信息的 <strong>App.config</strong> 文件。其中 <strong>App.config</strong> 这个文件主要的用途是配置一些相关的依赖信息，例如数据库连接字符串、Social Login的帐号等等。</p><h1 id="一个简单的控制台打印代码">一个简单的控制台打印代码</h1><p>创建 <strong>hello.cs</strong> 的文件，并编辑它，内容如下：</p><div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
 
<span class="k">namespace</span> <span class="nn">Hello</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span> 
    <span class="p">{</span>
    	<span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span> 
    	<span class="p">{</span>
		<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Console say Hello!"</span><span class="p">);</span>
    	<span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>使用 <code class="highlighter-rouge">csc.exe</code> 进程编译并运行</p><div class="language-shell highlighter-rouge"><pre class="highlight"><code>E:<span class="se">\&gt;</span>csc /out:hello.exe hello.cs
 
Microsoft <span class="o">(</span>R<span class="o">)</span> Visual C# Compiler version 4.6.1038.0
 
Copyright <span class="o">(</span>C<span class="o">)</span> Microsoft Corporation. All rights reserved.
 
This compiler is provided as part of the Microsoft <span class="o">(</span>R<span class="o">)</span> .NET Framework, but only supports language versions up to C# 5, which is no longer the latest version. For compilers that support newer versions of the C# programming language, see http://go.microsoft.com/fwlink/?LinkID<span class="o">=</span>533240
  
E:<span class="se">\&gt;</span>hello
Console say Hello!
</code></pre></div><h1 id="添加程序描述信息">添加程序描述信息</h1><p>右键属性程序时发现没有任何版权、版本等程序描述信息，此时可以通过 <strong>assembly</strong> 进行添加，修改后的代码如下：</p><div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Reflection</span><span class="p">;</span>
 
<span class="na">[assembly: AssemblyTitle("Hello Application")]</span>
<span class="na">[assembly: AssemblyCopyright("(C) 2016 Evan Wang")]</span>
<span class="na">[assembly: AssemblyFileVersion("1.0.1")]</span>
 
<span class="k">namespace</span> <span class="nn">Hello</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span> 
    <span class="p">{</span>
    	<span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span> 
    	<span class="p">{</span>
        	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Console say Hello!"</span><span class="p">);</span>
    	<span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h1 id="简单的图像界面应用">简单的图像界面应用</h1><p>创建命令行程序简单，创建图片应用就需要引入Windows Forms的类库，片段代码如下：</p><div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Reflection</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Windows.Forms</span><span class="p">;</span>
 
<span class="na">[assembly: AssemblyTitle("Hello Application")]</span>
<span class="na">[assembly: AssemblyCopyright("(C) 2016 Evan Wang")]</span>
<span class="na">[assembly: AssemblyFileVersion("1.0.1")]</span>
 
<span class="k">namespace</span> <span class="nn">Hello</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span> 
    <span class="p">{</span>
    	<span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span> 
    	<span class="p">{</span>
        	<span class="n">MessageBox</span><span class="p">.</span><span class="nf">Show</span><span class="p">(</span><span class="s">"Hello world!"</span><span class="p">,</span> <span class="s">"Console Terminal"</span><span class="p">);</span>
    	<span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h1 id="引入第三方库如何编译">引入第三方库如何编译</h1><p>下载好第三方sdk后，通常是dll文件，在编译时使用/r选项进行引入，如：</p><div class="language-shell highlighter-rouge"><pre class="highlight"><code>E:<span class="se">\&gt;</span>csc /out:hello.exe  /r:<span class="s2">"C:</span><span class="se">\P</span><span class="s2">rogram Files (x86)</span><span class="se">\A</span><span class="s2">WS SDK for .NET</span><span class="se">\b</span><span class="s2">in</span><span class="se">\N</span><span class="s2">et35</span><span class="se">\A</span><span class="s2">WSSDK.dll hello.cs
 
Microsoft (R) Visual C# Compiler version 4.6.1038.0
 
Copyright (C) Microsoft Corporation. All rights reserved.
 
This compiler is provided as part of the Microsoft (R) .NET Framework, but only supports language versions up to C# 5, which is no longer the latest version. For compilers that support newer versions of the C# programming language, see http://go.microsoft.com/fwlink/?LinkID=533240
</span></code></pre></div></article><div class="page-navigation"> <a class="next" href="/notes/VeilEvasion%E4%B8%8EArmitage%E7%9A%84%E9%9B%86%E6%88%90%E6%93%8D%E4%BD%9C" title="NEXT: Veilevasion与armitage的集成操作">&lt;&lt;</a> <span> &middot; </span> <a class="home" href="/" title="Back to Homepage">首页</a> <span> &middot; </span> <a class="prev" href="/notes/%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84java%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81" title="PREV: 图片验证码的java简单实现代码">&gt;&gt;</a></div></main><div class="footer"> <!-- <span class="block">Made with &hearts; using <a href="http://jekyllrb.com/">Jekyll</a> &amp; <a href="https://github.com/heiswayi/the-plain" title="The Plain theme by Heiswayi Nrird">The Plain</a> &middot; &lt;/&gt; on <a href="https://github.com/wangjunneil" title="Hosted on GitHub">GitHub</a></span> --> <span class="block"><a href="https://wangjunneil.github.io">Evan's Blog</a> © 2016 - All Rights Reserved</span></div></body></html>